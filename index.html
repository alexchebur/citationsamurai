<!DOCTYPE html>
<html lang='ru'><head><title>AXMA Story Maker JS</title><link rel='apple-touch-icon' href='https://sm.axmasoft.com/rsc/apple-touch-icon.png' /><meta http-equiv='Content-Type' content='text/html; charset=utf-8'><meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'><meta name='mobile-web-app-capable' content='yes'><meta name='apple-mobile-web-app-capable' content='yes'><meta name='apple-mobile-web-app-status-bar-style' content='black'><meta name='format-detection' content='telephone=no'><meta http-equiv='X-UA-Compatible' content='IE=edge'><style type='text/css'>*, #body {	-webkit-text-size-adjust:none; -webkit-tap-highlight-color:rgba(0,0,0,0); -webkit-focus-ring-color:rgba(0,0,0,0); outline:none; -webkit-touch-callout:none; -moz-user-select:none; -o-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -ms-user-select:none; user-select:none; -webkit-user-drag:none; user-drag:none; -webkit-overflow-scrolling:touch; !important; -moz-tab-size:4; -o-tab-size:4; tab-size:4; -moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;}center {display:block; text-align:center;}right {display:block; text-align:right;}p {margin-top:0; margin-bottom:0.6em;}select {width:100%; -webkit-appearance:none; padding:8px 6px; border-radius:0; margin:0 auto; clear:both; line-height:1;}html, #body {margin:0; height:100%; overflow:hidden;}#body, input, select {font-size:95%;}#body, .input_text, .input_butt, select {font-family:Tahoma, Geneva, 'Droid Sans', sans-serif;}.input_text, .input_butt, select, #printCont, #printAdd, #printImage, .wind, .button, .buttonno, .dialogButton, #shadowlayer {background-color:rgba(20,20,20,0.5); color:#FFFFFF;}#body {height: 100%; width: 100%;overflow: auto;	background-image:url(#);	background-repeat:repeat;	background-color:#222222;	word-wrap:break-word;}#menu, #buttonsList * {background-color:rgba(64,64,64,0.5); color:#FFFFFF;}#toolbar, #printTitle {height:36px; position:absolute; top:0; left:0; right:0; padding:6px 0; overflow:hidden; z-index:1; font-size:0.9em;}#page {display:none; height:100%; max-height:100%; width:100%; max-width:600px; text-align:left; margin:0 auto; overflow:hidden;}#printTitle {background-color:rgba(20,20,20,0.5); color:#FFFFFF; z-index:-1; display:block; line-height:36px; padding:0 80px; overflow:hidden;}#printTitle * {display:inline;}#printCont, #printImage, #menu, #buttonsList * {box-shadow:none;}#printCont {position:absolute; top:36px; bottom:36px; left:0; right:0; overflow:auto; }#printImage {display:none; overflow:hidden; position:absolute; top:36px; bottom:36px; left:0; right:0;}#clickImage {width:100%; height:100%; object-fit:cover; max-width:none;}#print, #printAdd {padding:1em 1.5em; line-height:1.4em;}#print {margin:0 auto; max-width:600px;}#menu {height:36px; max-height:36px; margin:0; padding:1em; font-size:13px; overflow:auto; position:absolute; left:0; right:0; bottom:0; text-align:center; z-index:98; line-height:1.1em;}#menuTable {height:100%;}#menu span {background-color:transparent; border:none; border-radius:0; padding:0; display:inline-block; margin:0 10px; max-width:100px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}#menu img {display:inline; max-height:20px; vertical-align:middle;}#printAddCont {display:none; position:absolute; left:1em; right:1em; top:56px; bottom:56px; z-index:100; overflow:hidden;}#printAdd {width:100%; max-width:668px; position:absolute; margin:0 auto; left:0; right:0; top:30%; transform:translateY(-30%); max-height:100%; overflow:auto; box-shadow:none;}#printAddText {text-align:left;position:relative;}.wind {display:none; position:absolute; width:240px; margin-left:-120px; height:auto; max-height:220px; left:50%; top:50%; transform:translateY(-50%); z-index:101; padding:1em; text-align:center; overflow:auto; font-size:15px; box-shadow:none; line-height:1.6em;}.plink, .plinkno, a, .button, .buttonno, .dialogButton {color:#E9D460; text-decoration:none; -webkit-tap-highlight-color:rgba(128,128,128,0.2);}.wind .plink, .wind .plinkno {color:inherit;}.button, .buttonno, .dialogButton {display:table; font-size:0.95em; border-width:2px; border-style:solid; border-color:#FFFFFF; padding:3px 8px; margin:0 4px 2px 0; max-width:90%; -webkit-hyphens: auto; hyphens: auto; border-radius:5px; -webkit-tap-highlight-color:rgba(128,128,128,0.2);}.dialogButton {display:inline-block; padding:2px 0px; margin:0; min-width:30px; width:44%;}.plinkno, .buttonno {opacity:0.6; pointer-events:none;}#storyauthor {font-size:1.3em; letter-spacing:0.12em; line-height:1;}#storytitle {font-size:1.8em; margin:1em 0; line-height:1;}#storyauthor p, #storytitle p {margin:0;}#storysubtitle {font-size:0.8em; text-align:center; max-height:8em; overflow:auto; }code, tt, #console {font-family:Menlo, Monaco, 'Droid Sans Mono', 'Courier New', Courier, 'Lucida Console', monospace;}code {display:block; white-space:pre-wrap; margin:1em 0; padding:0.5em; border:2px dotted;}.input_text {-webkit-appearance:none; margin:0; padding:4px; width:90%; border-width:0;}.input_text, #console, #console *, code, tt, code *, tt * {-moz-user-select:text; -o-user-select:text; -khtml-user-select:text; -webkit-user-select:text; -ms-user-select:text; user-select:text;}.input_butt {-webkit-appearance:none; margin:0; text-align:right; width:10%; padding:4px; border:none;}.myinput, .trow, select {border-width:2px; border-style:solid; border-color:#FFFFFF;}.myinput {padding:2px; width:100%; margin:0 auto; clear:both;}h1,h2,h3,h4,h5,h6 {color:#d2d7d3;}h1,h2,h3,h4,h5,h6 {text-align:center; padding:0.5em 0; display:block; font-weight:normal; margin:0.5em auto;}h1 {font-size:1.4em;}h2 {font-size:1.3em;}h3 {font-size:1.2em;}h4 {font-size:1.1em;}h5 {font-size:1.0em;}h6 {font-size:0.9em;}img {max-width:100%; border:none; margin:0; padding:0;}.file {max-width:100%; display:block; margin:0.2em auto;}.accentLogASM {color: #96281B;}.avatar {visibility:hidden; max-width:90%;}.video {position:relative; padding-bottom:56.25%; padding-top:30px; height:0; overflow:hidden;}.video iframe, .video object, .video embed {position:absolute; top:0; left:0; width:100%; height:100%;}ol, ul, dl, li {margin-left:0px;}.choice {display:inline-block; margin-left:0.75em; position:relative;}.choice .plink {margin:0.5em 0;}.choice .plink:before {content:'✓'; position:relative; left:-0.5em; visibility:hidden; color:#FFFFFF; -webkit-transition:opacity 0.5s ease; transition:opacity 0.5s ease; opacity:0;}.choice .selected:before {visibility:visible; opacity:1;}#console {position:absolute; top:0; right:0; left:0; z-index:99; margin-top:36px; padding:0 5px; color:#000000; height:0; overflow:hidden; font-size:12px; background-color:rgba(255,255,255,0.8); -webkit-transition:height 0.5s ease; transition:height 0.5s ease;}body {scrollbar-face-color:#FFFFFF; scrollbar-track-color:rgba(20,20,20,0.5);} ::-webkit-scrollbar {-webkit-appearance:none; width:6px; height:6px;} ::-webkit-scrollbar-corner {background:transparent;} ::-webkit-scrollbar-track {background:transparent;} ::-webkit-scrollbar-thumb {background-color:#FFFFFF; border-radius:6px; opacity:0.7;} ::-webkit-scrollbar-thumb:hover {opacity:0.6;}.imgbutton {display:inline-block; border-radius:50%; width:24px; height:24px; background-position:center; background-repeat:no-repeat; background-color:rgba(255,255,255,0.75); background-size:20px;}.imgbutton:hover {opacity:0.8;}#showImageButton {position:fixed; background:#FF0000; bottom:0; left:0; width:20px; height:36px; overflow:hidden; z-index:100; background-color:rgba(255,255,255,0.3); background-repeat:no-repeat; background-size:80%; background-position:center center; background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAABUFBMVEUAAAAHBwcAAAALCwsAAAAAAAAXFxcGBgYaGhoMDAz///8HBwcICAgJCQkZGRkKCgoaGho/Pz/T09MRERGoqKiOjo4JCQkKCgoLCwsRERERERETExMfHx8YGBgeHh4eHh4gICA5OTlTU1N2dnYICAgHBwcNDQ0JCQkMDAwTExMvLy9gYGCkpKQLCwsNDQ0QEBAWFhYbGxsnJycuLi4pKSlgYGAGBgYJCQkICAgHBwcMDAwREREPDw8LCwsHBwcNDQ0VFRUUFBQbGxsVFRUfHx8gICAcHBwrKysxMTFYWFhJSUkTExMFBQUXFxcKCgoLCwsLCwsTExMYGBgdHR0iIiIrKysqKipGRkYFBQUODg4SEhIMDAwFBQUXFxcQEBAeHh5DQ0OwsLAnJycMDAwSEhIWFhYODg4pKSlMTEweHh5gYGAAAAACAgIEBAQQEBAMDAzFBWcXAAAAa3RSTlMABf0D+/kB9nfdAvPl32PJgBoFkgkI79zTuqOcbV9dWEUuFg3o4dLNwKAlGAvXx46DWkovKxP57N/Twrazs6admHlzZmJLRkI7Gxj89/S8t7WzjmdUPSYj+/O9ubWQaiccDgrkx8aojlRDQGI2Q8gAAAUcSURBVFjDpVf3W9swEFUck51ABgkFQtiQEMosUCh7QwuUMrr3lkT//9/6ZHRWjJ2U76s+cJK7986nO0l3Yv4RCannh3L+zeOR45s/x6nHb/LleSULRdi/R1jRL/OTknuGLOX3W5swbx+MTQpQbNuyLMXFh23jU5Q2B2Gi9esZm3iXBMe2vA5oUfT8EUDN+bAei3Leptk+G22cJ7eaOxEJs7ku0AVvOgRMjM6xcGAkIOyVRG9lQm4FTgOiHsFtD9gJHx4eo4B0Ax7Af+B5vUDkDckWHicegODz/xtva4w5gHKk/eTt2+WxEQlJY178FiLO+w3d4mKxe6aWu9XmajPdw0JJjYXnIHny1wOhUYv2viFnYmo4wKHKQ+mBbLBwI79XuEqEbHJXCUOg6vyGVOpnuxBW14LoBc0N4IDkwg2y7ICIFr1Z43hhh6Q0AS4HQKQAjEJB/Oh+k7UG+EGxAdgFqp5ADHMi8eK12XJh+I6ZhM1OO4wTFJ8xUB3DE1EuiD+chVTDNdFMCKqhkvYBlOQgyEqYJ6sWT14TX31k997H3pf7s4wZ6USRW+TCOX7DRvYpOSDkgUbC7Vxm+alwpNGTTKdJ2KUUDS5EIJnWDuCjg/iM9X1xFiT2ArQy3RtyI9Zh8JsKn0trnyyKK/iF5wLHgrgVlzJXHy5+1m91eEy6hFICkn5aHZacBdXhP4qDTnF9wpzx6RPIjgu7LkP0Q9DDbW3vIfELlCwljYMTxmC/D8m/dm5p4z2MJUr0S1QoryvEV9I+Rwru5x8UxxlhmznMS4rpcAEopd8R4JP05TULa94TZ+UANDRMeZPzrMxt7U5VqwspyjSlShtYX8jpV3S7pAybou9iBhqlfYEJmCHmXQ++8x0NmXEN5NkZLU15pZD4X9YOaMg0+6xTU+TjGnIluU7xCRtz4HikOuEflEe0MygIAyyEweC3Fc0CAFhniliP2TOyNab40P+iLFMei/sMo1DlFvIOACzoRIL6jP0hV0/11srgu9eCPJ2aWl/kFhTbAKi3nNI0b5ggA2vQ0eHgtUCrBn+b2sATeovFZEsDVBTbUBgaDaySAcGOycCZnsI26fzDTGHcTCFO8WzXQdyjIPqHCeKYCWL73TRmFyAPGhAHpNGEQ9agJPeCBsTLGlJzF9J4w1Ku6CiWhS+KdAK90JA+QUt5g9KOZ7feTLmRYBcwy0LAZpqTgrZzXaszwS60iR3azotck+Qcyy35DxRU6qAJrEB1OwP3EEvjUKz6j7T6JOA+frwOlf9IazwiZ1nId6hqHfgTjhaPC2ETYw+ChO9YB6b+QKAnoQoCOl+p09nI4i5hKUeFIqCwpAUgNnaBQqd2qKfxFKJppurNYDKwtCX6xqm0jWcKkGj+vrRoYS5gYSrRuSmuxYnG4vqxv7wV2/YW18OkKa55ndZHSVPe40P/KO9pU96jR5TXLTdrKtgtGwzimwZD704jLh6A2aTFuWxscUbB/P8mK7jN65q9R5uHndnonbfRlA8rBR0EHYLOC1+jGfK2uq/vtLrD1UpNNzadtcp6qnWrix+Jr0HN9ura2mp7SopWzTZNIvG6Vbtvedr9leALQ1XcLUqWjWFcpwJTDb6y3PvK00t8/6VrYPQely7kP9Li2pdsfe2LxgBrefEcfBdtfvFc2Dgy7jd14qhDnSXCCZ/64oRS+T8y/RGAyD0u34m9nrT0Tl6m13dzoIfve39PzGXyZ6NLr25uXi2NrU6V5xMsmP4XV/4R83ayoXMAAAAASUVORK5CYII=);}#AudioButton {display:none; opacity:0.5; background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMyA5djZoNGw1IDVWNEw3IDlIM3ptMTMuNSAzYzAtMS43Ny0xLjAyLTMuMjktMi41LTQuMDN2OC4wNWMxLjQ4LS43MyAyLjUtMi4yNSAyLjUtNC4wMnpNMTQgMy4yM3YyLjA2YzIuODkuODYgNSAzLjU0IDUgNi43MXMtMi4xMSA1Ljg1LTUgNi43MXYyLjA2YzQuMDEtLjkxIDctNC40OSA3LTguNzdzLTIuOTktNy44Ni03LTguNzd6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==);}#ConsoleButton {background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTIwIDhoLTIuODFjLS40NS0uNzgtMS4wNy0xLjQ1LTEuODItMS45NkwxNyA0LjQxIDE1LjU5IDNsLTIuMTcgMi4xN0MxMi45NiA1LjA2IDEyLjQ5IDUgMTIgNWMtLjQ5IDAtLjk2LjA2LTEuNDEuMTdMOC40MSAzIDcgNC40MWwxLjYyIDEuNjNDNy44OCA2LjU1IDcuMjYgNy4yMiA2LjgxIDhINHYyaDIuMDljLS4wNS4zMy0uMDkuNjYtLjA5IDF2MUg0djJoMnYxYzAgLjM0LjA0LjY3LjA5IDFINHYyaDIuODFjMS4wNCAxLjc5IDIuOTcgMyA1LjE5IDNzNC4xNS0xLjIxIDUuMTktM0gyMHYtMmgtMi4wOWMuMDUtLjMzLjA5LS42Ni4wOS0xdi0xaDJ2LTJoLTJ2LTFjMC0uMzQtLjA0LS42Ny0uMDktMUgyMFY4em0tNiA4aC00di0yaDR2MnptMC00aC00di0yaDR2MnoiLz48L3N2Zz4=);}#ViewButton {background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDQuNUM3IDQuNSAyLjczIDcuNjEgMSAxMmMxLjczIDQuMzkgNiA3LjUgMTEgNy41czkuMjctMy4xMSAxMS03LjVjLTEuNzMtNC4zOS02LTcuNS0xMS03LjV6TTEyIDE3Yy0yLjc2IDAtNS0yLjI0LTUtNXMyLjI0LTUgNS01IDUgMi4yNCA1IDUtMi4yNCA1LTUgNXptMC04Yy0xLjY2IDAtMyAxLjM0LTMgM3MxLjM0IDMgMyAzIDMtMS4zNCAzLTMtMS4zNC0zLTMtM3oiLz48L3N2Zz4=);}#PrefsButton {background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDIwdjIwSDBWMHoiLz48cGF0aCBkPSJNMTUuOTUgMTAuNzhjLjAzLS4yNS4wNS0uNTEuMDUtLjc4cy0uMDItLjUzLS4wNi0uNzhsMS42OS0xLjMyYy4xNS0uMTIuMTktLjM0LjEtLjUxbC0xLjYtMi43N2MtLjEtLjE4LS4zMS0uMjQtLjQ5LS4xOGwtMS45OS44Yy0uNDItLjMyLS44Ni0uNTgtMS4zNS0uNzhMMTIgMi4zNGMtLjAzLS4yLS4yLS4zNC0uNC0uMzRIOC40Yy0uMiAwLS4zNi4xNC0uMzkuMzRsLS4zIDIuMTJjLS40OS4yLS45NC40Ny0xLjM1Ljc4bC0xLjk5LS44Yy0uMTgtLjA3LS4zOSAwLS40OS4xOGwtMS42IDIuNzdjLS4xLjE4LS4wNi4zOS4xLjUxbDEuNjkgMS4zMmMtLjA0LjI1LS4wNy41Mi0uMDcuNzhzLjAyLjUzLjA2Ljc4TDIuMzcgMTIuMWMtLjE1LjEyLS4xOS4zNC0uMS41MWwxLjYgMi43N2MuMS4xOC4zMS4yNC40OS4xOGwxLjk5LS44Yy40Mi4zMi44Ni41OCAxLjM1Ljc4bC4zIDIuMTJjLjA0LjIuMi4zNC40LjM0aDMuMmMuMiAwIC4zNy0uMTQuMzktLjM0bC4zLTIuMTJjLjQ5LS4yLjk0LS40NyAxLjM1LS43OGwxLjk5LjhjLjE4LjA3LjM5IDAgLjQ5LS4xOGwxLjYtMi43N2MuMS0uMTguMDYtLjM5LS4xLS41MWwtMS42Ny0xLjMyek0xMCAxM2MtMS42NSAwLTMtMS4zNS0zLTNzMS4zNS0zIDMtMyAzIDEuMzUgMyAzLTEuMzUgMy0zIDN6Ii8+PC9zdmc+);}#body {cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABYlBMVEUAAAA/Pz82Njb///8vLy////8tLS03NzeJiYklJSX39/ciIiJBQUEzMzMzMzOZmZn///8mJiY3Nzc0NDTg4OA2NjZMTEwsLCxubm5GRkZWVlYzMzM0NDQzMzM0NDQzMzMyMjIxMTEzMzMyMjIyMjIpKSk0NDTn5+f9/f09PT3Jycns7Oza2tpycnKrq6tDQ0OysrJcXFwzMzMzMzMyMjIxMTEzMzMxMTEzMzMxMTFAQECioqLZ2dkdHR03Nzfv7+/r6+vS0tJCQkIzMzOYmJi8vLy4uLhRUVEwMDDp6emioqJpaWmLi4uGhoZlZWXGxsaQkJB6enpZWVk0NDSFhYU2NjaXl5c2NjYzMzMyMjI1NTUyMjIyMjIyMjIyMjI1NTUzMzMrKys5OTn////7+/s6OjokJCQ3Nzc0NDSampomJiYxMTEtLS39/f04ODg5OTkvLy8qKir4+PgsLCwjIyMeHh7+hwJIAAAAY3RSTlMAA/H7Bfr47eL79/r201T+9/b19fT08/Px8fDvz7u1X0o7KhYR/vn29PTz8vDw7+/u7evdkXNoYkMmCPj39/b19fT09PPy8vHx8PDw7+/v7ezs6ebk5OPgyMbBrJ2AeiIZDAnUBOCsAAABsElEQVQ4y33SZ1vqMBQH8JTYXluGcEH2Bvce13X33su91yEk0lrA8f2N9YmPJOJpkhc5v+f/ojnoODeYr6Ae1LVyzVZz7egJ8dFOJVim3F28uXo57aeDpa7ieb0PJiOMLXHRFeDPBqMhIRRwBhfwN2G7i0h7DPRzUKvB+6jTfCGECvg37nPIAdJU4vMAX0Mf2mQeiRAF8D2WapN9IVTAD+urSfaEUAE/h2dMkuNCAn0e8AT+4yc7PULICQDnEJ4wSbCKtA7wj4N7gf+/pnOVjoRGL66JNi/9k+FuK4A3eRfrujX0anzVYcsPwLNGr/cnAayJdHyk3zAZzZzIoAZv3wFOXrdsSimbLSIJXIAV+A0QM9xsIVQqryCtE2AYm2oELMA/2xvendaZsA6xQJvUJwFGI+QQrYi2AFeb3785NHqZ1kFPO1vKWM06M4FLUlggkVGALyYpyI+VdQ2bLqKqbyCJIRxvZeWEUoZGQ+gUzbuJGMAPPynKEdWlyu2klWn9F0A4ZecloHmbrzwbGdanp+wgkku7O4rUSMb9NhGzrVawOdAicwtqQ+QsB9luSLm/ARNReAP/nQ5NAAAAAElFTkSuQmCC),default;}a, .plink, .button, .dialogButton, select, .input_butt, .imgbutton, #showImageButton, .sprite[active], #backVideoSkip, #shadowlayer, .updateButton {cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABZVBMVEUAAABDQ0M0NDQ2NjI1NDI3NjIzMzP/1gAlKDb3xgI0NDM2NjKKdB3/1AD/0AAiJjdsXiQzMzMzMzIyMjL/zQAmKTZCPi/gtAfouwUsLjRMRixZUClEPy6wkRM0MzM0NDIzNDMyMjMzMzMyMjItLjQ0NDMtLjX/0QD9ygA3NjLJpA5HQi1TSyu6mBHsvgRyYiPasAmOdhwzMzNZTyo2NTKHcR4zMzMyMzMyMjMxMTIzMzMxMjQzMzMzMzMzMzMyMjIxMTH/3AAvMDQrLTSihxcdIzlBPS/ZsAk+PDDrvQXvwQRBPjDSqguYfxk8OjAxMjOihhdlWSaGcR4zMzOqjBbGoA56aSE0MzOXfhoyMjIyMjQyMjQyMjIwMDU1NTUrKyv/////1gAkKDc6OTaagBkmKTc2NjYwMTU3NjQ4ODYtLzX/0wArLTU6OTT/2AD/0AAyMzYpLDY2NTP/4wD/zQAeJDn/2QAjmktHAAAAYHRSTlMAAwb18O3+/fv39fLj/Pv68dO9Fvn29vT08/Py7+/PtV9KKhH5+ff39PPz8vLy8vDw7uvp4uLdx5FzaGJVU0M8Jvr5+Pj39/f19fX09PPy8fDv7+3t7ezm46ydgHo6Igwu7hV9AAABs0lEQVQ4y33SZ1PbQBAG4JPiqIF7740WeocQWnpC772sfFhdxqb9ftBgcYNuzI6kD7eP3pubWxSN9BajiEUdK4JV/fjqAyGpQ2nFV+ksPtV+5YNK7yURFLi5P4gr3DIRFJD5kZ+ctkgEBeDpMK1q3xDTEYC8IRn6VyIoAI3xLsM+RwxNvrwCkFPrFp5HiOkEQB7NWfiMFl0uAFMcFvApERQAcyAr4AgRFIDbwG4Qz7FtQUAD3kT/mGCHq++Erz5BADz4j34rs1FHEDDDAynz++YPfQ69S+jm3b8DMTH1d3zK4FYRy7QLfa53y87uAOJYNvNP6hM4Zf+aBLSBvPYf+NCjqiqKxk2WEeMBppjYa0CyTyuUFlcq7XMSwJujuXpCBH+oNe0suX0XzNwn/1h2LS/DYBxfINZtu6B2kto2NMkaDkAga0xTYzVpTCUsXFrA8UETRgRc8l5WQe9pvkxb1dcK+SGWUQvehBWfJi0hFs3r6eQt7ATtsjeiuhx1Jq1yV5uQoX+oWfQAxnmdp6hsDcTyuWaY9AhxPmWtJ5QJqtidbbrCeku1ZxfohpuzGr6LLFHrzy8SdsLD0lZqAAAAAElFTkSuQmCC),pointer;}	#printCont, #printAdd, #printImage, #menu, .wind {border-width:0px; border-style:solid; border-color:inherit; border-image:url(#) 0 round;}#shadowlayer {position:absolute; left:0; top:0; right:0; bottom:0; text-align:center; padding:2em; font-size:1.2em; background-color:transparent; z-index:99;}#shadowlayer[visible] {background-color:rgba(0,0,0,0.5);}#shadowlayer div {margin-left:auto; margin-right:auto; max-width:50em;}#spritesDiv {position:relative; top:-100%; height:100%; overflow:hidden; text-align:left;}.sprite {display:block; position:absolute; max-width:none; max-height:none; margin:auto; opacity:0;}.sprite[active] {webkit-transition:all 300ms linear; transition:all 300ms linear;}.sprite[active]:hover {-webkit-transform:scale(1.05); transform:scale(1.05);}.sprite[drag] {cursor:move !important;}#backVideo {position:absolute; top:50%; left:50%; min-width:100%; min-height:100%; width:auto; height:auto; transform:translate(-50%,-50%);}#backVideoSkip {position:absolute; left:50%; width:1em; height:1em; line-height:1em; padding:0.2em; margin-left:-0.6em; top:50%; margin-top:-0.6em; font-size:2em; color:#fff; background-color:rgba(128,128,128,0.5); border-radius:50%; z-index:1; text-shadow:none; -webkit-transition:all 300ms ease; transition:all 300ms ease;}#backVideoSkip:hover {-webkit-transform:scale(1.1); transform:scale(1.1);}*[nohover]:hover {-webkit-transform:none !important; transform:none !important; -webkit-transition:none !important; transition:none !important;}.clickEffect {position:fixed; background-color:#555; border-radius:50%; -webkit-animation:clickEffect 0.4s ease-out; animation:clickEffect 0.3s ease-out; z-index:99999; pointer-events:none;}@-webkit-keyframes clickEffect {	0% {opacity:0.8; width:8px; height:8px; margin:-4px;}	100% {opacity:0; width:48px; height:48px; margin:-24px; background-color:#ccc;}}@keyframes clickEffect {	0% {opacity:0.8; width:8px; height:8px; margin:-4px;}	100% {opacity:0; width:48px; height:48px; margin:-24px; background-color:#ccc;}}.clickEffect[active] {-webkit-animation-name:clickEffectActive; animation-name:clickEffectActive;}@-webkit-keyframes clickEffectActive {	0% {opacity:0.8; width:8px; height:8px; margin:-4px;}	100% {opacity:0; width:240px; height:240px; margin:-120px; background-color:#ccc;}}@keyframes clickEffectActive {	0% {opacity:0.8; width:8px; height:8px; margin:-4px;}	100% {opacity:0; width:240px; height:240px; margin:-120px; background-color:#ccc;}}#body {font-size:110%;}#console {text-shadow:none; letter-spacing:normal;}#page {max-width:none; margin:0 auto; position:absolute; left:0; right:0; top:0; bottom:0;}#avatarBlock {max-width:25%; float:left;}#printCont {position:absolute; margin:0 auto; left:0; right:0; bottom:auto; top:50%; transform:translateY(-50%); padding:0.5em 1em; width:100%; max-width:40em; height:auto; min-height:0; max-height:50%; overflow:auto; z-index:1;}#print {max-width:none; padding:0;}#printAdd {padding:1em; max-width:35em; max-height:65%;}#printImage {display:block; position:absolute; top:0; left:0; right:0; bottom:0; border:none;	background-color:rgba(0,0,0,0); cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABYlBMVEUAAAA/Pz82Njb///8vLy////8tLS03NzeJiYklJSX39/ciIiJBQUEzMzMzMzOZmZn///8mJiY3Nzc0NDTg4OA2NjZMTEwsLCxubm5GRkZWVlYzMzM0NDQzMzM0NDQzMzMyMjIxMTEzMzMyMjIyMjIpKSk0NDTn5+f9/f09PT3Jycns7Oza2tpycnKrq6tDQ0OysrJcXFwzMzMzMzMyMjIxMTEzMzMxMTEzMzMxMTFAQECioqLZ2dkdHR03Nzfv7+/r6+vS0tJCQkIzMzOYmJi8vLy4uLhRUVEwMDDp6emioqJpaWmLi4uGhoZlZWXGxsaQkJB6enpZWVk0NDSFhYU2NjaXl5c2NjYzMzMyMjI1NTUyMjIyMjIyMjIyMjI1NTUzMzMrKys5OTn////7+/s6OjokJCQ3Nzc0NDSampomJiYxMTEtLS39/f04ODg5OTkvLy8qKir4+PgsLCwjIyMeHh7+hwJIAAAAY3RSTlMAA/H7Bfr47eL79/r201T+9/b19fT08/Px8fDvz7u1X0o7KhYR/vn29PTz8vDw7+/u7evdkXNoYkMmCPj39/b19fT09PPy8vHx8PDw7+/v7ezs6ebk5OPgyMbBrJ2AeiIZDAnUBOCsAAABsElEQVQ4y33SZ1vqMBQH8JTYXluGcEH2Bvce13X33su91yEk0lrA8f2N9YmPJOJpkhc5v+f/ojnoODeYr6Ae1LVyzVZz7egJ8dFOJVim3F28uXo57aeDpa7ieb0PJiOMLXHRFeDPBqMhIRRwBhfwN2G7i0h7DPRzUKvB+6jTfCGECvg37nPIAdJU4vMAX0Mf2mQeiRAF8D2WapN9IVTAD+urSfaEUAE/h2dMkuNCAn0e8AT+4yc7PULICQDnEJ4wSbCKtA7wj4N7gf+/pnOVjoRGL66JNi/9k+FuK4A3eRfrujX0anzVYcsPwLNGr/cnAayJdHyk3zAZzZzIoAZv3wFOXrdsSimbLSIJXIAV+A0QM9xsIVQqryCtE2AYm2oELMA/2xvendaZsA6xQJvUJwFGI+QQrYi2AFeb3785NHqZ1kFPO1vKWM06M4FLUlggkVGALyYpyI+VdQ2bLqKqbyCJIRxvZeWEUoZGQ+gUzbuJGMAPPynKEdWlyu2klWn9F0A4ZecloHmbrzwbGdanp+wgkku7O4rUSMb9NhGzrVawOdAicwtqQ+QsB9luSLm/ARNReAP/nQ5NAAAAAElFTkSuQmCC),default;}#menu {font-size:1em; line-height:1.2; position:absolute; padding:0 1em; height:auto; max-height:70%; top:50%; bottom:auto; transform:translateY(-50%); left:auto; right:1em; width:auto; overflow-y:auto; overflow-x:hidden; max-width:10em;}#menuTable {height:auto;}#menu span {display:block; margin:0.8em 0; white-space:normal; width:auto; max-width:none; word-break:break-all;}#menu img {display:block; margin:0 auto; max-width:100%; max-height:4em;}#printCont, #printAdd, #printTitle, #menu, #buttonsList *, .wind, #console {-webkit-backdrop-filter:blur(3px); backdrop-filter:blur(3px);}.dialogButton, button, .button, .buttonno {border-style:none;}#buttonsList * {-webkit-transition:all 500ms ease; transition:all 500ms ease;}#buttonsList {line-height:1; min-height:0; max-height:20%; height:auto; opacity:1; padding:1em; width:95%; max-width:90em; min-width:0; position:absolute; margin:auto; left:0; right:0; bottom:0; overflow-y:auto; overflow-x:hidden; text-align:center;}#buttonsList * {display:inline-block; padding:0.5em 1em; text-align:center; margin:0.2em 0.5em; max-width:none; min-width:10em;}#buttonsList>*:hover {-webkit-transform:scale(1.08); transform:scale(1.08);}.myinput *, select {background-color:rgba(0,0,0,0);}#spacer, #showImageButton {display:none;}@media only screen and (max-width:1149px) {	#menu {width:100%; max-width:40em; max-height:15%; margin:0 auto; left:50%; right:auto; top:56px; transform:translateY(0); transform:translateX(-50%); padding:0.5em;}	#menu img {max-height:2.5em;}	#menu span, #menu div, #menu p, #menu img {display:inline; padding:0 0.25em;}	#printCont {max-height:50%;}	#buttonsList * {min-width:0;}}@media only screen and (max-width:599px) {	#body {font-size:100%;}}@media only screen and (max-height:599px) {	#body {font-size:90%;}	#menu {width:100%; max-width:40em; max-height:15%; margin:0 auto; left:50%; right:auto; top:36px; transform:translateY(0); transform:translateX(-50%); padding:0 0.5em;}	#menu img {max-height:2em;}	#menu span, #menu p, #menu img {display:inline; padding:0 0.25em;}	#buttonsList {padding:0;}}#printCont, #buttonsList, #menu, #toolbar {-webkit-transition:opacity 0.5s ease; transition:opacity 0.5s ease;}.effect_fade {	-webkit-animation-name: effect_fade;	animation-name: effect_fade;	-webkit-animation-fill-mode: both;	animation-fill-mode: both;	-webkit-animation-duration: 1000ms;	animation-duration: 1000ms;}@-webkit-keyframes effect_fade {	0% {opacity: 0;}		100% {opacity: 1;}}@keyframes effect_fade {	0% {opacity: 0;}		100% {opacity: 1;}}.effect_fade_fast {	-webkit-animation-name: effect_fade;	animation-name: effect_fade;	-webkit-animation-fill-mode: both;	animation-fill-mode: both;	-webkit-animation-duration: 400ms;	animation-duration: 400ms;}.effect_bounce {-webkit-animation-name:effect_bounce;animation-name:effect_bounce;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:.7s;animation-duration:.7s;}@-webkit-keyframes effect_bounce {0% {opacity:0;-webkit-transform:scale(.3);}50% {opacity:1;-webkit-transform:scale(1.05);}70% {-webkit-transform:scale(.9);}100% {-webkit-transform:scale(1);}}@keyframes effect_bounce {0% {opacity:0;transform:scale(.3);}50% {opacity:1;transform:scale(1.05);}70% {transform:scale(.9);}100% {transform:scale(1);}}.effect_scale {-webkit-animation:effect_scale .2s ease-out both;animation:effect_scale .2s ease-out both;}@-webkit-keyframes effect_scale {from { opacity:0; -webkit-transform:scale(.4); }}@keyframes effect_scale {from { opacity:0; transform:scale(.4); }}.effect_fade_sprite {-webkit-animation:effect_fade_sprite 1s both linear;animation:effect_fade_sprite 1s both linear;}@-webkit-keyframes effect_fade_sprite {from { opacity:0; }}@keyframes effect_fade_sprite {from { opacity:0; }}.effect_flip {-webkit-transform-origin:50% 50%;-webkit-animation:effect_flipx .7s both ease-out;transform-origin:50% 50%;animation:effect_flipx .7s both ease-out;}@-webkit-keyframes effect_flipx {from { -webkit-transform:translateZ(-1000px) rotateY(90deg); opacity:0.2; }}@keyframes effect_flipx {from { transform:translateZ(-1000px) rotateY(90deg); opacity:0.2; }}.effect_flipY {-webkit-transform-origin:50% 50%;-webkit-animation:effect_flipy .7s both ease-out;transform-origin:50% 50%;animation:effect_flipy .7s both ease-out;}@-webkit-keyframes effect_flipy {from { -webkit-transform:translateZ(-1000px) rotateX(90deg); opacity:0.2; }}@keyframes effect_flipy {from { transform:translateZ(-1000px) rotateX(90deg); opacity:0.2; }}.effect_fly {-webkit-animation:effect_fly 1s ease both;animation:effect_fly 1s ease both;}@-webkit-keyframes effect_fly {from { opacity:0; -webkit-transform:scale(3); }}@keyframes effect_fly {from { opacity:0; transform:scale(3); }}.effect_flash {-webkit-animation:effect_flash 10s 10s linear infinite;animation:effect_flash 10s 10s linear infinite;}@-webkit-keyframes effect_flash {0% { -webkit-transform:scale(1); }3% { -webkit-transform:scale(1.02); }6% { -webkit-transform:scale(1); }9% { -webkit-transform:scale(1.02); }12%{ -webkit-transform:scale(1); }}@keyframes effect_flash {0% { transform:scale(1); }3% { transform:scale(1.02); }6% { transform:scale(1); }9% { transform:scale(1.02); }12%{ transform:scale(1); }}.effect_pulse {-webkit-animation:effect_pulse 435ms ease-in-out infinite;animation:effect_pulse 435ms ease-in-out infinite;}@-webkit-keyframes effect_pulse {0% { -webkit-transform:scale(0.98); }50% { -webkit-transform:scale(1); }100%{ -webkit-transform:scale(0.98); }}@keyframes effect_pulse {0% { transform:scale(0.98); }50% { transform:scale(1); }100%{ transform:scale(0.98); }}.effect_slide_left {-webkit-animation-name:effect_slide_left; animation-name:effect_slide_left;}@-webkit-keyframes effect_slide_left {from {-webkit-transform:translate3d(100%,0,0); opacity:0;}to {-webkit-transform:translate3d(0,0,0);}}@keyframes effect_slide_left {from {transform:translate3d(100%,0,0); opacity:0;}to {transform:translate3d(0,0,0);}}#printCont.effect_slide_left {-webkit-animation-name:effect_slide_left2; animation-name:effect_slide_left2;}@-webkit-keyframes effect_slide_left2 {from {-webkit-transform:translate3d(100%,-50%,0); opacity:0;}to {-webkit-transform:translate3d(0,-50%,0);}}@keyframes effect_slide_left2 {from {transform:translate3d(100%,-50%,0); opacity:0;}to {transform:translate3d(0,-50%,0);}}.effect_slide_right {-webkit-animation-name:effect_slide_right; animation-name:effect_slide_right;}@-webkit-keyframes effect_slide_right {from {-webkit-transform:translate3d(-100%,0,0); opacity:0;}to {-webkit-transform:translate3d(0,0,0);}}@keyframes effect_slide_right {from {transform:translate3d(-100%,0,0); opacity:0;}to {transform:translate3d(0,0,0);}}#printCont.effect_slide_right {-webkit-animation-name:effect_slide_right2; animation-name:effect_slide_right2;}@-webkit-keyframes effect_slide_right2 {from {-webkit-transform:translate3d(-100%,-50%,0); opacity:0;}to {-webkit-transform:translate3d(0,-50%,0);}}@keyframes effect_slide_right2 {from {transform:translate3d(-100%,-50%,0); opacity:0;}to {transform:translate3d(0,-50%,0);}}.effect_slide_up {-webkit-animation-name:effect_slide_up; animation-name:effect_slide_up;}@-webkit-keyframes effect_slide_up {from {-webkit-transform:translate3d(0,100%,0); opacity:0;}to {-webkit-transform:translate3d(0,0,0);}}@keyframes effect_slide_up {from {transform:translate3d(0,100%,0); opacity:0;}to {transform:translate3d(0,0,0);}}#printCont.effect_slide_up {-webkit-animation-name:effect_slide_up2; animation-name:effect_slide_up2;}@-webkit-keyframes effect_slide_up2 {from {-webkit-transform:translate3d(0,100%,0); opacity:0;}to {-webkit-transform:translate3d(0,-50%,0);}}@keyframes effect_slide_up2 {from {transform:translate3d(0,100%,0); opacity:0;}to {transform:translate3d(0,-50%,0);}}.effect_slide_down {-webkit-animation-name:effect_slide_down; animation-name:effect_slide_down;animation-duration:1.7s;	-webkit-animation-duration:1.7s;}@-webkit-keyframes effect_slide_down {from {-webkit-transform:translate3d(0,-100%,0); opacity:0;}to {-webkit-transform:translate3d(0,0,0);}}@keyframes effect_slide_down {from {transform:translate3d(0,-100%,0); opacity:0;}to {transform:translate3d(0,0,0);}}#printCont.effect_slide_down {-webkit-animation-name:effect_slide_down2; animation-name:effect_slide_down2;animation-duration:1.7s;	-webkit-animation-duration:1.7s;}@-webkit-keyframes effect_slide_down2 {from {-webkit-transform:translate3d(0,-100%,0); opacity:0;}to {-webkit-transform:translate3d(0,-50%,0);}}@keyframes effect_slide_down2 {from {transform:translate3d(0,-100%,0); opacity:0;}to {transform:translate3d(0,-50%,0);}}.effect_hatch {animation-name:effect_hatch;-webkit-animation-name:effect_hatch;animation-duration:2s;	-webkit-animation-duration:2s;animation-timing-function:ease-in-out;	-webkit-animation-timing-function:ease-in-out;transform-origin:50% 100%;-webkit-transform-origin:50% 100%; }@keyframes effect_hatch {0% {transform:rotate(0deg) scaleY(0.6);}20% {transform:rotate(-2deg) scaleY(1.05);}35% {transform:rotate(2deg) scaleY(1);}50% {transform:rotate(-2deg);}65% {transform:rotate(1deg);}80% {transform:rotate(-1deg);}100% {transform:rotate(0deg);}}@-webkit-keyframes effect_hatch {0% {-webkit-transform:rotate(0deg) scaleY(0.6);}20% {-webkit-transform:rotate(-2deg) scaleY(1.05);}35% {-webkit-transform:rotate(2deg) scaleY(1);}50% {-webkit-transform:rotate(-2deg);}65% {-webkit-transform:rotate(1deg);}80% {-webkit-transform:rotate(-1deg);}100% {-webkit-transform:rotate(0deg);}}.effect_fade_out {-webkit-animation-name:effect_fade_out;animation-name:effect_fade_out;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:1000ms;animation-duration:1000ms;}@-webkit-keyframes effect_fade_out {0% {opacity:1;}	100% {opacity:0;}}@keyframes effect_fade_out {0% {opacity:1;}	100% {opacity:0;}}.effect_button {-webkit-animation:effect_button .5s ease-out both;animation:effect_button .5s ease-out both;}@-webkit-keyframes effect_button {from { -webkit-transform:scale(.6); }}@keyframes effect_button {from { transform:scale(.6); }}.effect_avatar {-webkit-animation:effect_avatar 700ms ease;animation:effect_avatar 700ms ease;}@-webkit-keyframes effect_avatar {from {-webkit-transform:scale(.3);}to {-webkit-transform:scale(1);}}@keyframes effect_avatar {from {transform:scale(.3);}to {transform:scale(1);}}.effect_sprite_hide {-webkit-animation-name:effect_sprite_hide;animation-name:effect_sprite_hide;-webkit-animation-fill-mode:both;animation-fill-mode:both;}@-webkit-keyframes effect_sprite_hide {100% {opacity:0;}}@keyframes effect_sprite_hide {100% {opacity:0;}}</style></head><body id='body' onclick='asmGlobal_showPrefs(true);' oncontextmenu='asmGlobal_showPrefs();return false;'><div id='toolbar'><table width='100%' cellpadding='0' cellspacing='0' border='0' style='table-layout:fixed;'><tr><td width='20%' align='left'><nobr><div class='imgbutton' style='margin-left:8px;' onclick='asmGlobal_tbAnimate(this,event);asmGlobal_togglePrint(false,true);event.stopPropagation();' id='ViewButton'></div></nobr></td><td width='60%' align='center' valign='middle'><div id='printTitle'></div></td><td width='20%' align='right'><nobr><div class='imgbutton' style='margin-right:8px;' onclick='asmGlobal_tbAnimate(this,event);asmGlobal_PlayPauseButton();' id='AudioButton' ></div><div class='imgbutton' style='margin-right:8px;' onclick='asmGlobal_tbAnimate(this,event);asmGlobal_showPrefs();event.stopPropagation();' id='PrefsButton'></div></nobr></td></tr></table></div><audio id='musicAudio' preload loop style='display:none;'></audio><div id='page'><div id='printCont'><div id='avatarBlock'></div><div id='print'></div></div><div id='printImage' onclick='asmGlobal_togglePrint(true,false);event.stopPropagation();'><div style='height:100%;width:100%;text-align:center;'><span style='display:inline-block;height:100%;vertical-align:middle;'></span><img id='clickImage' src='#' style='vertical-align:middle;margin:0;border:none;' alt='' border='0'><div id='videoDiv'></div><div id='spritesDiv'></div></div></div><div id='spacer'></div><div id='menu'><div id='menuTable' style='display:table;border-spacing:0;width:100%;min-width:100%;border:none;'><div style='display:table-row;'><div id='menuInner' style='display:table-cell;padding:0;width:100%;text-align:center;vertical-align:middle;'></div></div></div></div></div><div id='printAddCont' onclick='asmGlobal_showPrefs(true);'><div id='printAdd' onclick="asmGlobal.prefsDiv.style.display='none';event.stopPropagation();"><div id='printAddText'></div></div></div><div id='prefs' class='wind' onclick='event.stopPropagation();'></div><div id='dialog' class='wind' onclick='event.stopPropagation();'></div><noscript style='position:absolute;top:40%;left:0;right:0;padding:5px;text-align:center;color:#FFFFFF;background-color:#222222;'>Для работы файла требуется, чтобы Javascript был включен в Вашем браузере</noscript><script>var asmGlobal = {};function $(s,elem) {	if (!s) {return;}	if (!elem) {		elem = document;	}	s = s.replace(/^s*?#/,'').trim();	if (/^\./.test(s)) {		s = s.replace(/^\./,'');		return elem.getElementsByClassName(s);	} else if (/^<.+?>$/.test(s)) {		s = s.replace(/^<(.+?)>$/,'$1');		return elem.getElementsByTagName(s);	} else if (/^\{.+?\}$/.test(s)) {		s = s.replace(/^\{(.+?)\}$/,'$1');		return elem.querySelectorAll(s);	} else {		s = s.replace(/^#/,'');		return document.getElementById(s);	}}function onLoadStory() {asmGlobal.pageDiv.style.display = 'block';asmGlobal_NewGame(true);}asmGlobal.printTitle = $('printTitle');asmGlobal.printDiv = $('print');asmGlobal.printContDiv = $('printCont');asmGlobal.printAdd = $('printAdd');asmGlobal.printAddCont = $('printAddCont');asmGlobal.printAddText = $('printAddText');asmGlobal.pageDiv = $('page');asmGlobal.menuDiv = $('menuInner');asmGlobal.avatarBlock = $('avatarBlock');asmGlobal.toolbarDiv = $('toolbar');asmGlobal.prefsDiv = $('prefs');asmGlobal.printImage = $('clickImage');asmGlobal.videoDiv = $('videoDiv');asmGlobal.spritesDiv = $('spritesDiv');if (!('objectFit' in document.body.style)) {asmGlobal.printImage.style.width='auto';asmGlobal.printImage.style.height='auto';asmGlobal.printImage.style.maxWidth='100%';};asmGlobal.printImageBlock = $('printImage');asmGlobal.showImageButton = $('showImageButton');asmGlobal.consoleDiv = $('console');asmGlobal.dialogWind = $('dialog');asmGlobal.AudioButton = $('AudioButton');asmGlobal.badImage = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAhUlEQVQ4y7VUQQrAIAzzOf57H/Af+gt/UPC+FXoQVxe3RSEopSQprQ1hxymlxJzzcd1VYe/4Od8CrYfGZoQw35TaABmVO2fi5FdEeFP2nLmEIFHdJIOsCKNSEGTaROAUO3sYB/nlzCFOC4TpzaBzCOkl05pCH5sdg839evTlsGN9cRcs85zfmkXOXkhCxwAAAABJRU5ErkJggg==';asmGlobal.pictureDefault = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQI12NgAAIAAAUAAeImBZsAAAAASUVORK5CYII=';document.addEventListener('DOMContentLoaded',onLoadStory);asmGlobal.LangCode = 'ru';asmGlobal.isWebKit  = 'WebkitAppearance' in document.documentElement.style;asmGlobal.isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox')>-1;asmGlobal.isAndroid = navigator.userAgent.toLowerCase().indexOf('android')>-1;asmGlobal.isOnline  = /^http(s)?:\/\/.+?$/.test(document.URL);asmGlobal.isAndroidWebview = asmGlobal.isAndroid && asmGlobal.isOnline;function asmGlobal_isMobile() {var elem = asmGlobal.showImageButton;if (!elem || getComputedStyle(elem,null).display=='none') {return false;}return true;}function asmGlobal_clickEffect(e) {var element = e.target;var checkParents = function(parents,child) {var node = child.parentNode;while (node!=null) {if (parents.indexOf(node)!=-1) {return true;}node = node.parentNode;}return false;};if (e.button!==0 || !(checkParents([asmGlobal.pageDiv,asmGlobal.printAdd,asmGlobal.menuDiv,$('buttonsList')],element))) {return;}var d = document.createElement('div');d.className='clickEffect';if (element.onclick) {d.setAttribute('active','');}d.style.top  = e.clientY+'px';d.style.left = e.clientX+'px';document.body.appendChild(d);asmGlobal_prefixedEventListener(d,'AnimationEnd',function() {d.parentElement.removeChild(d);});}function asmGlobal_setClickEffect() {document.removeEventListener('mousedown',asmGlobal_clickEffect);if (asm.click) {document.addEventListener('mousedown',asmGlobal_clickEffect);}}asmGlobal.stopNames = [];for (var name in window) {asmGlobal.stopNames.push(name);}asmGlobal.stopNames = asmGlobal.stopNames.concat(['$','button','back','choice','clear','copy','display','effect','either','filter','flip','goto','image','input','link','log','menu','message','music','print','picture','popup','random','repeat','restart','select','sprite','sprites','sound','script','style','stop','texteffect','title','tab','update','video','visited']);function asmGlobal_Resize() {if (asmGlobal_isMobile()) {asmGlobal.printImageBlock.style.display = 'none';} else {asmGlobal.printImageBlock.style.display = 'block';}}window.addEventListener('resize', asmGlobal_Resize, false);window.addEventListener('orientationchange', asmGlobal_Resize, false);document.addEventListener('dragstart', function(e){e.preventDefault();});window.onkeyup = function(e) {asmGlobal_keysUp(e);};window.onkeydown = function(e) {asmGlobal_keysDown(e);};asmGlobal.printImage.onerror = function() {asmGlobal_badImageShow(this);};if ('ontouchmove' in window) {asmGlobal.spritesDiv.addEventListener('touchmove',function(e) {e = e || window.event;e.returnValue = false;e.cancelBubble = true;if (e.preventDefault) {e.preventDefault();e.stopPropagation();}return false;},false);}if ('onmousemove' in window) {asmGlobal.mouseDown = false;document.onmousedown = function(e) {asmGlobal.mouseDown = true;};document.onmouseup = function(e) {asmGlobal.mouseDown = false;};}if ('ontouchmove' in window) {document.ontouchstart = function(e) {asmGlobal.mouseDown = true;};document.ontouchend = function(e) {asmGlobal.mouseDown = false;};}function asmGlobal_isFunction(obj) {var getType = {};return obj && getType.toString.call(obj)==='[object Function]';}function asmGlobal_isArray(obj) {if (typeof Array.isArray==='undefined') {Array.isArray = function(obj) {return Object.prototype.toString.call(obj)==='[object Array]';};}return Array.isArray(obj);}function asmGlobal_isObject(obj) {if (typeof obj=='object') {return true;}}function asmGlobal_isNumber(obj) {return !isNaN(parseInt(obj,10));}function asmGlobal_isString(obj) {return typeof obj==='string';}asmGlobal.visitedList = [];window.print = function(s,p,fromstart,div) {if (arguments.length>0) {if (p) {s = '<p></p>'+s+'<p></p>';}asmGlobal_ToText(s,fromstart,div);}return asmGlobal.printDiv.innerHTML+asmGlobal.Output.string;};window.log = function(s,show) {};window.link = function(title,passage,type,code) {return asmGlobal_linkGenerate(title,passage,type,code,false);};window.button = function(title,passage,type,code) {return asmGlobal_linkGenerate(title,passage,type,code,true);};window.back = function(title,button) {var myclass = 'plink';if (button) {myclass = 'button';}if (!title) {title = 'Назад';}return "<span class='"+myclass+"' onclick='asmGlobal_Back();event.stopPropagation();'>"+title+"</span>";};window.restart = function(title,button) {var myclass = 'plink';if (button) {myclass = 'button';}if (!title) {title = 'Начать заново';}return "<span class='"+myclass+"' onclick='asmGlobal_NewGame();event.stopPropagation();'>"+title+"</span>";};window.clear = function() {asmGlobal_ToText('',true);};window.display = function(passage) {asmGlobal_DisplayLocation(passage);};window.random = function(n1,n2) {if (arguments.length==1) {return Math.floor(Math.random()*(parseInt(n1)+1));} else {return Math.floor(Math.random()*(n2-n1+1))+n1;}};window.title = function(s) {asmGlobal_ToText(s,true,asmGlobal.printTitle,true);};window.flip = function(n) {if (n<0) { n = 0; };if (n>1000) { n = 1000; };asmGlobal.TimeToFade = n;};window.menu = function(s) {if (arguments.length>0) {asmGlobal_ToText(s,true,asmGlobal.menuDiv,true);asmGlobal_ImagesOnError(asmGlobal.menuDiv);}return asmGlobal.menuDiv.innerHTML;};window.goto = function(passage) {asmGlobal_PrintLocation(passage);asmGlobal_fade(asmGlobal.printDiv);throw new Error('goto exception');};window.sound = function(sound) {if (asmGlobal.audio_enable) {var sound = asmGlobal_GetFileData(sound);if (sound) {sound.play();}}};window.picture = function(path) {asmGlobal.printImage.src = '';asmGlobal.printImage.src = asmGlobal.pictureDefault;asmGlobal.printImage.onload = function() {if (path) {asmGlobal.printImage.src = asmGlobal_GetMediaPath(path);}asmGlobal_showImageForce(true);this.onload = null;}};window.image = function(sprite) {var prt = function() {asmGlobal_ToText("<img class='file' border='0' onload='asmGlobal_goodImageShow(this)' src="+asmGlobal_GetFileData(sprite).src+">");};if (asmGlobal.printDiv.id=='print') {asmGlobal_SetAvatar(sprite)} else {prt();};};window.update = function() {asmGlobal.Output.print();};window.music = function(path,loop) {if (path) {asmGlobal_setAudioPath(path,loop);asmGlobal_playMusic();} else {asmGlobal_setAudioPath();asmGlobal_stopMusic();}};window.texteffect = function(effect) {asmGlobal_setEffect(effect,true);};window.effect = function(effect) {asmGlobal_setEffect(effect);};window.tab = function(n) {var s = '';for (var i=1;i<=n;i++) {s = s + '&nbsp;';}return s;};window.filter = function(s) {if (!s) {s = 'none';}asmGlobal.printImage.style.WebkitFilter = s;asmGlobal.printImage.style.filter = s;var backVideo = $('backVideo');if (backVideo) {backVideo.style.WebkitFilter = s;backVideo.style.filter = s;}};window.repeat = function(passage,sec) {if (!sec) {sec = 1;}if (parseFloat(sec)<0.1) {sec = 0.1;}asmGlobal_startEvent(passage,sec);};window.stop = function(passage) {asmGlobal_stopEvent(passage);};window.choice = function() {$$choice = 0;arguments = [].slice.call(arguments);var func = null;var multi = false;if (arguments[0]===true) {multi = true;$$choice = [];arguments.splice(0,1);} else if (arguments[0]===false) {arguments.splice(0,1);}var n = arguments.length;if (asmGlobal_isFunction(arguments[n-1])) {func = arguments[n-1];arguments.length--; n--;}if (n>0) {var s = "<div class='choice'>";var nn = 1;for (var i=0; i<n; i++) {var print = function(arg) {s += "<div class='plink' onclick='asmGlobal_choice("+multi+",this,"+nn+","+func+");event.stopPropagation();'>"+arg+"</div>";nn++;};var arg = arguments[i];if (asmGlobal_isArray(arg)) {for (var j in arg) {print(arg[j]);}} else {print(arg);}}s += '</div>';asmGlobal_ToText(s);}};window.select = function() {$$select = 0;arguments = [].slice.call(arguments);var selected = false;var func = null;if (asmGlobal_isNumber(arguments[0]) && arguments[0]>0) {selected = arguments[0];$$select = selected;arguments.splice(0,1);} else if (!arguments[0]) {arguments.splice(0,1);}var n = arguments.length;if (asmGlobal_isFunction(arguments[n-1])) {func = arguments[n-1];arguments.length--; n--;}if (n>0) {var s = "<select onchange='asmGlobal_select(this.value,this.options[this.selectedIndex].text,"+func+");'><option value='0' disabled selected>→</option>";var nn = 1;for (var i=0; i<n; i++) {var print = function(arg) {var sel = '';if (selected==nn) {sel = ' selected';}s += "<option"+sel+" value='"+nn+"'>"+arg+"</option>";nn++;};var arg = arguments[i];if (asmGlobal_isArray(arg)) {for (var j in arg) {print(arg[j]);}} else {print(arg);}}s += '</select>';asmGlobal_ToText(s);}};window.script = function(path,func) {if (path) {var myscript = document.createElement('script');if (func && asmGlobal_isFunction(func)) {myscript.onload = func();}myscript.type = 'text/javascript';myscript.src = asmGlobal_GetMediaPath(path);document.getElementsByTagName('head')[0].appendChild(myscript);}};window.style = function(path,media) {if (path) {if (!media) {media = 'all';}if (/(?=.*{)(?=.*})(?=.*:)/.test(path)) {var head = document.head || document.getElementsByTagName('head')[0];var style = document.createElement('style');style.type = 'text/css';style.media = media;style.appendChild(document.createTextNode(path));head.appendChild(style);} else {var head  = document.getElementsByTagName('head')[0];var link  = document.createElement('link');link.rel  = 'stylesheet';link.type = 'text/css';link.href = asmGlobal_GetMediaPath(path);link.media = media;head.appendChild(link);}}};window.message = function(s) {asmGlobal_AlertMessage(s);};window.video = function(path,onEnd) {if (path) {var backVideo = $('backVideo');if (!backVideo) {backVideo = document.createElement('video');backVideo.id = 'backVideo';backVideo.setAttribute('autoplay','');backVideo.setAttribute('playsinline','');backVideo.setAttribute('muted','');backVideo.type = 'video/mp4';asmGlobal.videoDiv.appendChild(backVideo);}if (onEnd) {backVideo.onended = function() {asmGlobal.videoDiv.innerHTML = '';asmGlobal_PrintLocation(onEnd);};var backVideoSkip = $('backVideoSkip');if (!backVideoSkip) {backVideoSkip = document.createElement('div');backVideoSkip.id = 'backVideoSkip';backVideoSkip.innerHTML = '⇥';backVideoSkip.onclick = function(event) {event.stopPropagation();asmGlobal.videoDiv.innerHTML = '';asmGlobal_PrintLocation(onEnd);};asmGlobal.videoDiv.appendChild(backVideoSkip);}asmGlobal_Animate(backVideoSkip,'effect_scale');} else {backVideo.setAttribute('loop','');}backVideo.src = asmGlobal_GetMediaPath(path);backVideo.onerror = function() {asmGlobal_AlertMessage('Ошибка загрузки файла<br>'+this.src);};} else {asmGlobal.videoDiv.innerHTML = '';}};window.input = function(passage) {if (passage) {var value = $$input;if (!value) {value = '';} else {value = value.toString();}var focus = '';if (!asmGlobal.isTouchDevice) {focus = 'autofocus';}if (asmGlobal_isFunction(passage)) {var code = "eval("+passage+"($$input));";} else {var code = "asmGlobal_PrintLocation(&quot;"+passage+"&quot;);";}asmGlobal_ToText("<div class='myinput'><form action='' onsubmit='if (this.childNodes[0].value.trim()!=&quot;&quot;) {$$input = this.childNodes[0].value.trim();if (!isNaN($$input)) {$$input = parseFloat($$input);}"+code+"}this.childNodes[0].select();return false;'><input class='input_text' type='text' onclick='event.stopPropagation();' autocapitalize='off' size='10' value='"+value+"'"+focus+"><input class='input_butt' type='submit' onclick='event.stopPropagation();' value='✓'></form></div>");}};window.popup = function(passage) {if (passage) {asmGlobal_PopupLocation(passage);}return asmGlobal.popupPassage;};window.sprite = function(path) {var img = document.createElement('img');img.className = 'sprite';var setCoord = function(n,prop) {if (n!==undefined && n!==null) {if (n===true) {img.style[prop] = 'auto';} else {n = Number(n);if (isNaN(n)) {n = 0;}img.style[prop] = n+'%';}}var ret = img.style[prop];if (ret=='auto') {ret = true;} else {ret = Number(ret.replace('%',''));}return ret;};var checkTime = function(time) {if (isNaN(time) || time<0) {time = 0;}else if (time>10000) {time = 10000;}return time;};img.copy = function(path) {return copy(this,path);};img.mypath = undefined;Object.defineProperty(img,'path',{set: function(path) {if (path!==undefined && path!==null) {path = path.toString();this.mypath = path;var src;var dataURL = asmGlobal_GetFileData(path).src;if (dataURL) {src = dataURL;} else if (/https?:\/\//i.test(path)) {src = path;} else if (path) {src = asmGlobal_GetMediaPath(path);}this.src = src;}},get: function() {return this.mypath;}});if (path!==undefined && path!==null && path!='') {img.path = path;}Object.defineProperty(img,'right',{set: function(n) {return setCoord(n,'right');},get: function() {return setCoord(undefined,'right');}});img.right = 0;Object.defineProperty(img,'left',{set: function(n) {return setCoord(n,'left');},get: function() {return setCoord(undefined,'left');}});img.left = 0;Object.defineProperty(img,'bottom',{set: function(n) {return setCoord(n,'bottom');},get: function() {return setCoord(undefined,'bottom');}});img.bottom = 0;Object.defineProperty(img,'top',{set: function(n) {return setCoord(n,'top');},get: function() {return setCoord(undefined,'top');}});img.top = 0;Object.defineProperty(img,'width',{set: function(n) {setCoord(n,'width');},get: function() {return setCoord(undefined,'width');}});img.width = 30;Object.defineProperty(img,'height',{set: function(n) {setCoord(n,'height');},get: function() {return setCoord(undefined,'height');}});img.height = true;Object.defineProperty(img,'opacity',{set: function(n) {if (n!==undefined) {n = Number(n);if (isNaN(n) || n<0) {n = 0;}else if (n>100) {n = 100;}this.style.opacity = n/100;}},get: function() {var ret = Number(img.style.opacity);return ret*100;}});img.opacity = 100;img.myaction = undefined;Object.defineProperty(img,'action',{set: function(act) {this.drag = undefined;if (asmGlobal_isFunction(act)) {this.setAttribute('active','');this.onclick = function(e) {e.stopPropagation();if (img.order) {img.parentNode.appendChild(img);}var x = Math.round((e.clientX-img.offsetLeft)/img.offsetWidth*100);var y = Math.round((e.clientY-img.offsetTop)/img.offsetHeight*100);var coords = {x:x, y:y};act(img,coords);};} else if (act) {this.setAttribute('active','');this.onclick = function(e) {e.stopPropagation();if (act.search(/:\/\//)!=-1) {window.open(act);} else {asmGlobal_PopupLocation(act);}};} else {this.removeAttribute('active');this.onclick = null;}this.myaction = act;},get: function() {return this.myaction;}});img.mydrag = undefined;Object.defineProperty(img,'drag',{set: function(drg) {if (asmGlobal_isFunction(drg)) {this.action = undefined;this.setAttribute('drag','');this.dragState = {};var block = asmGlobal.spritesDiv;var setOffset = function(x,y) {if (img.order) {img.parentNode.appendChild(img);}img.dragState.offsetX = Math.round((x-img.offsetLeft)/block.offsetWidth*100);img.dragState.offsetY = Math.round((y-img.offsetTop)/block.offsetHeight*100);};var setPos = function(x,y) {x = Math.round(x/block.offsetWidth*100);y = Math.round(y/block.offsetHeight*100);img.left = x - img.dragState.offsetX;img.top  = y - img.dragState.offsetY;img.style.right  = 'auto';img.style.bottom = 'auto';drg(img);};this.onmousedown = function(e) {setOffset(e.clientX,e.clientY);};this.ontouchstart = function(e) {var touch = e.targetTouches[0];setOffset(touch.pageX,touch.pageY);};this.onmousemove = function(e) {if (asmGlobal.mouseDown) {setPos(e.clientX,e.clientY);}};this.ontouchmove = function(e) {if (asmGlobal.mouseDown && e.targetTouches.length==1) {var touch = e.targetTouches[0];setPos(touch.pageX,touch.pageY);}};} else {this.removeAttribute('drag');this.dragState = undefined;this.onmousedown = null;this.onmouseup = null;this.onmousemove = null;this.ontouchstart = null;this.ontouchend = null;this.ontouchmove = null;}this.mydrag = drg;},get: function() {return this.mydrag;}});img.myfilter = undefined;Object.defineProperty(img,'filter',{set: function(s) {if (!s) {s = 'none';}this.style.WebkitFilter = s;this.style.filter = s;this.myfilter = s;},get: function() {return this.myfilter;}});img.myFlipX = false;Object.defineProperty(img,'flipX',{set: function(n) {if (n) {var s = 'scaleX(-1)';if (img.myFlipY===true) {s += ' scaleY(-1)';}if (img.myRotate!==0) {s += ' rotate('+img.myRotate+'deg)';}img.style.WebkitTransform = s;img.style.transform = s;img.myFlipX = true;} else {var s = 'scaleX(1)';img.style.WebkitTransform = s;img.style.transform = s;img.myFlipX = false;}},get: function() {return img.myFlipX;}});img.myFlipY = false;Object.defineProperty(img,'flipY',{set: function(n) {if (n) {var s = 'scaleY(-1)';if (img.myFlipX===true) {s += ' scaleX(-1)';}if (img.myRotate!==0) {s += ' rotate('+img.myRotate+'deg)';}img.style.WebkitTransform = s;img.style.transform = s;img.myFlipY = true;} else {var s = 'scaleY(1)';img.style.WebkitTransform = s;img.style.transform = s;img.myFlipY = false;}},get: function() {return img.myFlipY;}});img.myRotate = 0;Object.defineProperty(img,'rotate',{set: function(n) {var s = 'rotate('+n+'deg)';if (img.myFlipX===true) {s += ' scaleX(-1)';}if (img.myFlipY===true) {s += ' scaleY(-1)';}img.style.WebkitTransform = s;img.style.transform = s;img.myRotate = n;},get: function() {return img.myRotate;}});img.show = function(time,callback) {time = checkTime(time);this.style.display = 'none';this.style.WebkitAnimationDuration = time+'ms';this.style.animationDuration = time+'ms';this.style.opacity = this.opacity+'%';asmGlobal.spritesDiv.appendChild(this);var show = function() {img.style.display = 'block';if (asmGlobal.isAnimation && asmGlobal.animation_enable) {asmGlobal_Animate(img,asmGlobal_getEffectName(asmGlobal.SpriteEffect));}asmGlobal_showImageForce(false);};if (this.naturalWidth===0) {this.onload = function() {show();if (callback && asmGlobal_isFunction(callback)) {callback();}};} else {show();if (callback && asmGlobal_isFunction(callback)) {callback();}}};img.hide = function(time) {var remove = function() {if (img) {img.parentNode.removeChild(img);}};if (!time || !asmGlobal.isAnimation || !asmGlobal.animation_enable) {remove();} else {time = checkTime(time);this.style['-webkit-animation-duration'] = time+'ms';this.style['animation-duration'] = time+'ms';asmGlobal_Animate(this,'effect_sprite_hide',function(){remove();});}};Object.defineProperty(img,'visible',{set: function(show) {if (show===true) {this.show();} else if (show===false) {this.hide()}},get: function() {if (this.parentNode && this.parentNode==asmGlobal.spritesDiv) {return true;} else {return false;}}});img.onerror = function() {asmGlobal_badImageShow(this);};return img;};window.copy = function(value,path) {if (value instanceof Array) {return asmGlobal_CloneArray(value);} else if (value && typeof value==='object' && value.constructor===Object) {return asmGlobal_CloneObject(value);} else if (value instanceof HTMLImageElement && value.className=='sprite') {if (path!==undefined && path!==null) {path = path.toString();var clone = sprite(path);} else {var clone = sprite(value.path);}clone.width = value.width;clone.height = value.height;clone.top = value.top;clone.bottom = value.bottom;clone.left = value.left;clone.right = value.right;clone.opacity = value.opacity;clone.filter = value.filter;clone.action = value.action;clone.drag = value.drag;for (var i=0; i<value.attributes.length; i++) {var attrName  = value.attributes[i].nodeName;var attrValue = value.attributes[i].nodeValue;clone.setAttribute(attrName,attrValue);}clone.style.transition = value.style.transition;clone.style.WebkitTransition = value.style.WebkitTransition;return clone;} else {return value;}};window.sprites = function(deleteAll) {var list = asmGlobal.spritesDiv.querySelectorAll('.sprite');if (deleteAll) {asmGlobal.spritesDiv.innerHTML = '';}return list;};window.visited = function() {var indexes = [];if (arguments.length<1) {indexes.push(asmGlobal_GetIndexLocation($$title));} else {for (var i in arguments) {indexes.push(asmGlobal_GetIndexLocation(arguments[i]));}}var result = [];for (var i in indexes) {var index = indexes[i];result.push([index,0]);for (var j in asmGlobal.visitedList) {var item = asmGlobal.visitedList[j];if (item[0]==index) {result[result.length-1] = item;break;}}}if (result.length==0) {return 0;} else {var min = result[0];for (var i in result) {if (result[i][1]<min[1]) {min = result[i];}}return min[1];}};window.either = function() {var arr = [];for (var i in arguments) {var arg = arguments[i];if (asmGlobal_isArray(arg)) {for (var j in arg) {arr.push(arg[j]);}} else {arr.push(arg);}}return arr[Math.floor(Math.random()*arr.length)];};function asmGlobal_plinks(elem,type,title,passage,code,button) {if (title) {var linkclass = 'plink';if (button) {linkclass = 'button';}if (!passage) {passage = title;}if (code) { code(); };passage = passage.trim();if (passage.substr(0,2)=='$$') {passage = eval(passage);}type = type.trim();if (type=='*') {asmGlobal_PopupLocation(passage);} else if (type=='+') {var randID = new Date().getTime()+Math.random().toString();asmGlobal_ToText("<div id='addBlock_"+randID+"'><p></p>");asmGlobal_DisplayLocation(passage,false);asmGlobal_ToText('</div>');asmGlobal.Output.disabledIDs.push(elem.id);asmGlobal.Output.print();asmGlobal_moveButtonsPage();var addBlock = $('addBlock_'+randID);asmGlobal_scrollDiv(false,true,true,addBlock);asmGlobal_Animate(addBlock,'effect_scale');} else {asmGlobal_PrintLocation(passage);}}}function asmGlobal_linkGenerate(title,passage,type,code,button) {if (title) {var replaceQuotes = function(s) {return s.toString().replace(/"/g,"'");};var myclass = 'plink';if (button) {myclass = 'button';}if (asmGlobal_isFunction(passage) && !type && !code) {passage = replaceQuotes(passage);return "<span class="+myclass+" onclick=\"eval("+passage+"());event.stopPropagation();\">"+title+"</span>";}if (!passage) {passage = title;}if (code && asmGlobal_isFunction(code)) {code = replaceQuotes(code);}var id = '';if (type=='+') {id = new Date().getTime()+Math.random().toString();id = " id='"+id+"'";}return "<span"+id+" class="+myclass+" onclick=\"asmGlobal_plinks(this,'"+type+"','"+title+"','"+passage+"',"+code+","+button+");event.stopPropagation();\">"+title+"</span>";} else {return '';}}function asmGlobal_choice(multi,elem,n,func) {var text = '';if (!multi) {if (elem.className=='plink selected') {elem.className = 'plink';$$choice = 0;} else {var elems = elem.parentNode.getElementsByClassName('plink selected');for (var i=0; i<elems.length; i++) {elems[i].className ='plink';}elem.className ='plink selected';text = elem.textContent;$$choice = n;}} else {if (elem.className=='plink selected') {var i = $$choice.indexOf(n);if (i!=-1) {$$choice.splice(i,1);}elem.className = 'plink';} else {$$choice.push(n);elem.className ='plink selected';text = elem.textContent;}}if (func && asmGlobal_isFunction(func)) {func($$choice,text);}}function asmGlobal_select(n,s,func) {$$select = n;if (func && asmGlobal_isFunction(func)) {func(n,s);}}asmGlobal.effectNames = ['effect_fade_sprite','effect_scale','effect_flip','effect_fly','effect_hatch','effect_slide_left','effect_slide_right','effect_slide_up','effect_slide_down'];function asmGlobal_rgb2hex(rgb) {rgb = rgb.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return (rgb && rgb.length === 4) ? '#'+('0'+parseInt(rgb[1],10).toString(16)).slice(-2)+('0'+parseInt(rgb[2],10).toString(16)).slice(-2)+('0'+ parseInt(rgb[3],10).toString(16)).slice(-2) : '';}function asmGlobal_isInputActive() {var tag = document.activeElement.tagName.toLowerCase();if (tag=='input' || tag=='textarea') {return true;} else {return false;};}function asmGlobal_keysDown(event) {if (asmGlobal_isInputActive()) {return;};var key = asmGlobal_keyCode(event);if (key==32) {event.preventDefault();}}function asmGlobal_keysUp(event) {if (asmGlobal_isInputActive()) {return;};if (asmGlobal.showCover) {asmGlobal_StartGame(); return;};var key = asmGlobal_keyCode(event);if (key==27) {if (getComputedStyle(asmGlobal.prefsDiv,null).display=='none') {asmGlobal_showPrefs();} else {asmGlobal_closeWinds();}return;}if (key==32) {asmGlobal_firstButtonClick();return;}var keyN = -1;if (key>=49 && key<=57)  {keyN=key-49;}if (key>=97 && key<=105) {keyN=key-97;}if (keyN>=0) {var elems = asmGlobal.menuDiv.querySelectorAll('*');var clickElems = [];for (var i=0; i<elems.length; i++) {if (elems[i].onclick) {clickElems.push(elems[i]);}}if (clickElems[keyN]) {clickElems[keyN].click();};}}function asmGlobal_printIsEmpty() {if (asmGlobal.printDiv.textContent.trim()=='' && asmGlobal.avatarBlock.innerHTML=='' && !(/<img/.test(asmGlobal.printDiv.innerHTML))) {return true;} else {return false;}}function asmGlobal_togglePrint(show,close) {if (asmGlobal_printIsEmpty()) {asmGlobal.printContDiv.style.display = 'none';} else {asmGlobal.printContDiv.style.display = 'block';}var opacity = window.getComputedStyle(asmGlobal.printContDiv,null).getPropertyValue('opacity');var objs = [asmGlobal.printContDiv,asmGlobal.consoleDiv,asmGlobal.toolbarDiv,$('menu'),$('buttonsList'),$('backVideoSkip')];for (var i in objs) {var obj = objs[i];if (obj) {if (close) {obj.style.pointerEvents = 'none';obj.style.opacity = 0;continue;}if (show || opacity==0) {obj.style.pointerEvents = 'auto';obj.style.opacity = 1;} else {obj.style.pointerEvents = 'none';obj.style.opacity = 0;}}}}function asmGlobal_firstButtonClick() {var buttonsList = $('buttonsList');if (buttonsList) {var opacity = window.getComputedStyle(buttonsList,null).getPropertyValue('opacity');if (opacity>0) {var click = function(element,parent) {if (element.onclick) {var action = element.onclick.toString();action = action.substring(action.indexOf('{')+1,action.lastIndexOf('}')).trim();var re = /^this.parentNode.innerHTML.+?;/;if (re.test(action)) {action = action.replace(re,'');parent.innerHTML = parent.innerHTML.replace(/.onclicks*?=/,'.noclick=');}eval(action);}};var n = buttonsList.getElementsByTagName('*').length;if (n==1) {click(buttonsList.firstChild,buttonsList);} else if (n==0) {var links = asmGlobal.printDiv.getElementsByClassName('plink');if (links.length==1) {click(links[0],asmGlobal.printDiv);}}}}}function asmGlobal_showImageToggle(){if (asmGlobal_isMobile()) {if (getComputedStyle(asmGlobal.printImageBlock,null).display=='none') {asmGlobal.printImageBlock.style.display='block';asmGlobal_Animate(asmGlobal.printImageBlock,'effect_scale');} else {asmGlobal.printImageBlock.style.display='none';}}else {if (getComputedStyle(asmGlobal.printAddCont,null).display=='none') {asmGlobal_showImage();} else {asmGlobal_showPrintAdd(false);}}}function asmGlobal_showImageForce(fade){if (asmGlobal_isMobile()) {asmGlobal.printImageBlock.style.display = 'block';}if (fade) {asmGlobal_Animate(asmGlobal.printImage,'effect_fade');}}function asmGlobal_goodImageShow(img){if(asmGlobal.isTouchDevice) {var obj = img.parentNode;obj.style.display = 'none';asmGlobal_scrollDiv(obj);obj.style.display = 'block';}}function asmGlobal_badImageShow(img){img.src = asmGlobal.badImage;}function asmGlobal_ImagesOnError(div){var images = div.getElementsByTagName('img');for(var i=0; i<images.length; i++) {images[i].onerror = function() {this.src = asmGlobal_GetMediaPath(this.src);this.onerror = function() { this.src = asmGlobal.badImage; };};}}function asmGlobal_GetMediaPath(path){return path;}function asmGlobal_showImage(){if (!asmGlobal_isMobile()) {asmGlobal.printAddText.innerHTML = "<img src='"+asmGlobal.printImage.src+"' style='height:600px;margin:0;padding:0;' border='0'>";asmGlobal.printAddText.innerHTML += asmGlobal.spritesDiv.innerHTML;asmGlobal_showPrintAdd(true,false,true);}else {asmGlobal.printImageBlock.style.display = 'none';}}asmGlobal.printAddTextAlign = asmGlobal.printAddText.style.textAlign;function asmGlobal_showPrintAdd(show,center) {if (show) {asmGlobal_closeWinds();asmGlobal_showShadow(true);if (center) {asmGlobal.printAddText.style.textAlign = 'center';} else {asmGlobal.printAddText.style.textAlign = asmGlobal.printAddTextAlign;}var inner = asmGlobal.printAddText.innerHTML;if (inner=='') {return;}asmGlobal.printAddText.innerHTML = inner;asmGlobal_ImagesOnError(asmGlobal.printAddText);asmGlobal.printAddCont.style.display = 'block'; asmGlobal_scrollDiv(asmGlobal.printAdd); if (asmGlobal.isAnimation && asmGlobal.animation_enable) { var effect='effect_scale'; asmGlobal_Animate(asmGlobal.printAdd,effect); } else { asmGlobal_fade(asmGlobal.printAddText); }} else {asmGlobal.popupPassage = false;asmGlobal_showShadow(false);asmGlobal.printAddCont.style.display = 'none';}}function asmGlobal_MenuInit() {var StoryMenu = asmGlobal_GetLocation('StoryMenu');if (StoryMenu!=false) {asmGlobal.menuDiv.innerHTML = '';var maindiv = asmGlobal.printDiv;asmGlobal.printDiv = asmGlobal.menuDiv;StoryMenu.Text();asmGlobal.Output.print();asmGlobal.printDiv = maindiv;asmGlobal_ToText('',false,asmGlobal.menuDiv,true);}}asmGlobal.fontSize = 1;function asmGlobal_ChangeFontSize(){if (asmGlobal.fontSize<1.2){asmGlobal.fontSize = asmGlobal.fontSize + 0.1;}else {asmGlobal.fontSize = 0.8}asmGlobal_fade(asmGlobal.printDiv);asmGlobal.printDiv.style.fontSize = asmGlobal.fontSize+'em';asmGlobal.printAdd.style.fontSize = asmGlobal.fontSize+'em';}function asmGlobal_scrollDiv(obj,bottom,typerstop,toDiv) {if (!obj) {obj = asmGlobal.printContDiv;}var offset = obj.scrollHeight;if (toDiv) {var fsize = parseFloat(window.getComputedStyle(toDiv,null).getPropertyValue('font-size'));offset = toDiv.offsetTop-fsize;}if (bottom) {obj.scrollTop = offset;}else {obj.scrollTop = 0;}}function asmGlobal_toVisitedList(index) {var n = 1;for (var i in asmGlobal.visitedList) {var item = asmGlobal.visitedList[i];if (item[0]==index) {n = item[1]+1;asmGlobal.visitedList.splice(i,1);break;}}asmGlobal.visitedList.push([index,n]);}function asmGlobal_closeWinds() {asmGlobal_showPrintAdd(false);asmGlobal_showPrefs(true);asmGlobal_showWindow(false,true);}function asmGlobal_showShadow(show) {if (show) {if (!$('shadowlayer')) {var shadow = document.createElement('div');if (asmGlobal.showCover) {shadow.removeAttribute('visible');} else {shadow.setAttribute('visible','');}shadow.className = 'effect_fade_fast';shadow.onclick = function() {asmGlobal_showPrefs(true);};shadow.id='shadowlayer'; document.body.appendChild(shadow);}} else {var shadow = $('shadowlayer');if (shadow) {document.body.removeChild(shadow);}asmGlobal.showCover = false;asmGlobal.printAddCont.style.display = 'none';}}function asmGlobal_keyCode(event) {return event.keyCode ? event.keyCode : event.charCode ? event.charCode : event.which;}asmGlobal.isTouchDevice = false;if ('ontouchmove' in window) {asmGlobal.isTouchDevice = true;}(function () {if (asmGlobal.isTouchDevice) {try {var ignore = /:hover/;for (var i=0; i<document.styleSheets.length; i++) {var sheet = document.styleSheets[i];if (!sheet.cssRules) {continue;}for (var j=sheet.cssRules.length-1; j>=0; j--) {var rule = sheet.cssRules[j];if (rule.type===CSSRule.STYLE_RULE && ignore.test(rule.selectorText)) {sheet.deleteRule(j);}}}} catch(e) {}}}());asmGlobal.musicAudio = $('musicAudio');asmGlobal.musicAudio.addEventListener('play',function() {asmGlobal_audioPlayEvent();},false);asmGlobal.musicAudio.addEventListener('pause',function() {asmGlobal_audioPauseEvent();},false);asmGlobal.musicAudio.addEventListener('durationchange',function() {asmGlobal_audioPlayEvent();},false);asmGlobal.musicAudio.addEventListener('error',function() {if (this.src.substr(-4)=='.mp3') {asmGlobal_AlertMessage('Ошибка загрузки файла<br>'+this.src);}},false);var asm = {};asmGlobal.audio_enable = true;asmGlobal.animation_enable = true;asmGlobal.showCover = false;asmGlobal.TimeToFade = 700;asmGlobal.SpriteEffect = 0;asmGlobal.TextEffect = 0;asmGlobal.isAnimation= false;if (document.body.style.WebkitAnimation!==undefined || document.body.style.MozAnimation!==undefined || document.body.style.OAnimation!==undefined || document.body.style.msAnimation!==undefined || document.body.style.KhtmlAnimation!==undefined || document.body.style.animation!==undefined) {asmGlobal.isAnimation = true;}function asmGlobal_tbAnimate(obj,event) {asmGlobal_Animate(obj,'effect_button');event.stopPropagation();}function asmGlobal_prefixedEventListener(element, type, callback) {var pfx = ['webkit', 'moz', 'MS', 'o', ''];for (var p=0; p<pfx.length; p++) {if (!pfx[p]) type = type.toLowerCase();element.addEventListener(pfx[p]+type, callback, false);}}function asmGlobal_Animate(obj,animID,callback){if (asmGlobal.isAnimation) {var objclass = obj.className.split(' ')[0];obj.className = objclass+' '+animID;asmGlobal_prefixedEventListener(obj,'AnimationEnd',function() {if(obj) {obj.className = objclass;if (callback) { callback(); }}}, false);}}asmGlobal.confirm_func;function asmGlobal_AreYouSure(func,text) {asmGlobal_showPrefs(true);asmGlobal.confirm_func = func;if (!text) {text = 'Вы уверены?';}	text += "<div style='margin-top:16px;'><span class='dialogButton' onclick=\"asmGlobal_showWindow(false,true);\" style='float:left;'>Нет</span><span class='dialogButton' style='float:right;' onclick='window[asmGlobal.confirm_func]();event.stopPropagation();'>Да</span></div>";asmGlobal_showWindow(text);}function asmGlobal_AlertMessage(text){	text += "<div style='margin-top:16px;'><span class='dialogButton' onclick=\"asmGlobal_showWindow(false,true);\">OK</span></div>";asmGlobal_showWindow(text);}asmGlobal.isLocalFile;if (location.href.substr(0,7)=='file://'){asmGlobal.isLocalFile=true;}else{asmGlobal.isLocalFile=false;}function asmGlobal_isLocalStorageAvailable() {if (!window.localStorage) {return false;}else {return true;}}function asmGlobal_LocNotFound(Title) {asmGlobal_AlertMessage('Параграф не найден');}asmGlobal.storydata = [];function asmGlobal_GetFileData(id) {if (/^http(s)?:\/\/.+?$/.test(id)) {var ret = {};ret.src = id;return ret;}id = id.toString().trim().toLowerCase();for (var key in asmGlobal.storydata) {if (asmGlobal.storydata[key][0]==id) {return asmGlobal.storydata[key][1];}}return '';}function asmGlobal_prefsFill(){asmGlobal.prefsDiv.innerHTML='';asmGlobal.prefsDiv.innerHTML+='<div><span class=plink onclick=\"asmGlobal_AreYouSure(&quot;asmGlobal_NewGame&quot;,&quot;Хотите начать заново?&quot;);event.stopPropagation();\">Начать заново</span></div>';if (asm.save) {	asmGlobal.prefsDiv.innerHTML+='<div><span class=plink onclick=\"asmGlobal_SaveLoadWind(true);\">Сохранить</span></div><div><span class=plink onclick=\"asmGlobal_SaveLoadWind(false);\">Восстановить</span></div>';}if (asmGlobal.audio_enable){asmGlobal.prefsDiv.innerHTML+='<div><span class=plink onclick=\"asmGlobal.audio_enable=false;asmGlobal_stopMusic();asmGlobal_prefsFill();\">Отключить звуки</span></div>';}else{asmGlobal.prefsDiv.innerHTML+='<div><span class=plink onclick=\"asmGlobal.audio_enable=true;asmGlobal_playMusic();asmGlobal_prefsFill();\">Включить звуки</span></div>';}if (asmGlobal.isAnimation){if (asmGlobal.animation_enable){asmGlobal.prefsDiv.innerHTML+='<div><span class=plink onclick=\"asmGlobal.animation_enable=false;asmGlobal_prefsFill();\">Отключить анимацию</span></div>';}else{asmGlobal.prefsDiv.innerHTML+='<div><span class=plink onclick=\"asmGlobal.animation_enable=true;asmGlobal_prefsFill();\">Включить анимацию</span></div>';}}asmGlobal.prefsDiv.innerHTML+='<div><span class=plink onclick=\"asmGlobal_ChangeFontSize();\">Размер текста</span></div>';}function asmGlobal_showWindow(text,close,modal) {if (arguments.length>0) {if (close) {asmGlobal.dialogWind.style.display = 'none';asmGlobal_showShadow();} else {asmGlobal_showShadow(true);if (text) {asmGlobal.dialogWind.innerHTML = text;}asmGlobal.dialogWind.style.display = 'block';asmGlobal_Animate(asmGlobal.dialogWind,'effect_fade_fast');}}if (asmGlobal.dialogWind.style.display=='none') {return false;} else {return true;}}function asmGlobal_showPrefs(close) {if (asmGlobal.showCover) {return;}if(close || asmGlobal.prefsDiv.style.display!='none' || asmGlobal_showWindow()) {asmGlobal_showShadow(false);asmGlobal_showWindow(false,true);asmGlobal.prefsDiv.style.display = 'none';}else {asmGlobal_showShadow(true);asmGlobal_prefsFill();asmGlobal.prefsDiv.style.display = 'block';asmGlobal_Animate(asmGlobal.prefsDiv,'effect_fade_fast');}}function asmGlobal_togglePrefs() {if (getComputedStyle(asmGlobal.prefsDiv,null).display=='none') {asmGlobal_showPrefs();} else {asmGlobal_closeWinds();}}function asmGlobal_setCookie(name, value){var expires = new Date();expires.setTime(expires.getTime()+31536000000);document.cookie = name + '=' + escape(value) + '; expires=' + expires.toGMTString() + '; path=/';}function asmGlobal_getCookie(name){var cookie = ' ' + document.cookie;var search = ' ' + name + '=';var setStr = null;var offset = 0;var end = 0;if (cookie.length>0){offset = cookie.indexOf(search);if (offset != -1){offset += search.length;end = cookie.indexOf(';', offset);if (end == -1){end = cookie.length;}setStr = decodeURIComponent(cookie.substring(offset, end));}}if (setStr==null){setStr = '';}return(setStr);}function asmGlobal_fade(element){if (asmGlobal.TimeToFade==0 || !element) {return;}var eid = element.id;element.style.opacity = '0';if (element.FadeState == null){if (element.style.opacity == null|| element.style.opacity == ''|| element.style.opacity == '1'){element.FadeState = 2;}else{element.FadeState = -2;}}if (element.FadeState == 1 || element.FadeState == -1){element.FadeState = element.FadeState == 1 ? -1 : 1;element.FadeTimeLeft = asmGlobal.TimeToFade - element.FadeTimeLeft;}else{element.FadeState = element.FadeState == 2 ? -1 : 1;element.FadeTimeLeft = asmGlobal.TimeToFade;setTimeout("asmGlobal_animateFade(" + new Date().getTime() + ",'" + eid + "')", 33);}}function asmGlobal_animateFade(lastTick, eid){var curTick = new Date().getTime();var elapsedTicks = curTick - lastTick;var element = $(eid);if (!element) { return; }if(element.FadeTimeLeft <= elapsedTicks){element.style.opacity = '1';element.style.filter = 'alpha(opacity = 100)';element.FadeState = element.FadeState == 1 ? 2 : -2;return;}element.FadeTimeLeft -= elapsedTicks;var newOpVal = element.FadeTimeLeft/asmGlobal.TimeToFade;newOpVal = 1 - newOpVal;element.style.opacity = newOpVal;element.style.filter = 'alpha(opacity = ' + (newOpVal*100) + ')';setTimeout("asmGlobal_animateFade(" + curTick + ",'" + eid + "')", 33);}function asmGlobal_Locations(Index,Title,Text){this.Index = Index;this.Title = Title;this.Text = Text;}function asmGlobal_EscapeRegExp(str) {return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,'\\$&');}function asmGlobal_NthField(str,delim,n,caseSens){var cs = 'i';if (caseSens){cs = '';}n--;var arr = str.split(new RegExp(asmGlobal_EscapeRegExp(delim),cs));if (n>(arr.length-1)){return '';}else{return arr[n];}}function asmGlobal_SortNumberArray(x,y) {return x-y;}function asmGlobal_bitTest(bit){num=this;return ((num>>bit)%2!=0);}function asmGlobal_bitSet(bit){num=this;return num|1<<bit;}function asmGlobal_bitClear(bit){num=this;return num &~(1<<bit);}function asmGlobal_bitToggle(bit){num=this;return num.bitTest(bit)?num.bitClear(bit):num.bitSet(bit);}Number.prototype.bitTest = asmGlobal_bitTest;Number.prototype.bitSet = asmGlobal_bitSet;Number.prototype.bitClear = asmGlobal_bitClear;Number.prototype.bitToggle = asmGlobal_bitToggle;String.prototype.bitTest = asmGlobal_bitTest;String.prototype.bitSet = asmGlobal_bitSet;String.prototype.bitClear = asmGlobal_bitClear;String.prototype.bitToggle = asmGlobal_bitToggle;function asmGlobal_CloneArray(myarr) {return [].concat(myarr);}function asmGlobal_CloneObject(myobj) {return JSON.parse(JSON.stringify(myobj));}asmGlobal.Location = [];asmGlobal.PrevLocation;asmGlobal.CurLocation;function asmGlobal_$$time() {var d = new Date();return Math.round(d.getTime()/1000);}Object.defineProperty(window,'$$time',{ get: asmGlobal_$$time });function asmGlobal_$$title() {return asmGlobal.CurLocation.Title;}Object.defineProperty(window,'$$title',{ get: asmGlobal_$$title });function asmGlobal_$$from() {return asmGlobal.PrevLocation.Title;}Object.defineProperty(window,'$$from',{ get: asmGlobal_$$from });function asmGlobal_getAsmSys_story(title) {var pass = asmGlobal_GetLocation(title);if (pass) {return pass.Text.trim();} else {return '';}}function asmGlobal_$$storytitle() {return asmGlobal_getAsmSys_story('storytitle');}Object.defineProperty(window,'$$storytitle',{ get: asmGlobal_$$storytitle });function asmGlobal_$$storysubtitle() {return asmGlobal_getAsmSys_story('storysubtitle');}Object.defineProperty(window,'$$storysubtitle',{ get: asmGlobal_$$storysubtitle });function asmGlobal_$$storyauthor() {return asmGlobal_getAsmSys_story('storyauthor');}Object.defineProperty(window,'$$storyauthor',{ get: asmGlobal_$$storyauthor });var $$choice = 0;var $$select = 0;var $$input = '';var $$online = asmGlobal.isOnline;var $$test = false;asmGlobal.console = '';function asmGlobal_GetLocation(Title) {Title = Title.toString().toLowerCase().trim();for (var key in asmGlobal.Location) {var Loc = asmGlobal.Location[key];if (Loc.Title.toLowerCase().trim()==Title) {return Loc;}}return false;}function asmGlobal_GetIndexLocation(Title) {if (!Title) {return -1;}Title = Title.toString().toLowerCase().trim();var LocIndex = 0;for (var key in asmGlobal.Location) {var Loc = asmGlobal.Location[key];if (Loc.Title.toLowerCase().trim()==Title) {return LocIndex;}LocIndex++;}return -1;}function asmGlobal_moveButtons(from,to) {var buttons = [].slice.call(from.querySelectorAll('button,.button,.buttonno,.buttonback'));var len = buttons.length;for (var i=0; i<len; i++) {to.appendChild(buttons[i]);}return len;}function asmGlobal_moveButtonsPage() {var buttonsList = $('buttonsList');if (buttonsList) {asmGlobal.pageDiv.removeChild(buttonsList);}buttonsList = document.createElement('div');buttonsList.id = 'buttonsList';asmGlobal.pageDiv.appendChild(buttonsList);if (asmGlobal_moveButtons(asmGlobal.printDiv,buttonsList)==0) {asmGlobal.pageDiv.removeChild(buttonsList);}}function asmGlobal_FlipPage() {var asmGlobal_AnimatePage = function(elem) {var time = asmGlobal.TimeToFade;var style = 'overflowX';var overflow = elem.parentNode.style[style];elem.parentNode.style[style] = 'hidden';elem.style.WebkitAnimationDuration = time+'ms';elem.style.animationDuration = time+'ms';asmGlobal_Animate(elem,asmGlobal_getEffectName(asmGlobal.TextEffect),function() {elem.parentNode.style[style] = overflow;});};asmGlobal.printDiv.className = asmGlobal.printDiv.className.replace(/effect_flash/g,'').trim();var buttonsList = $('buttonsList');asmGlobal_moveButtonsPage();if (asmGlobal.isAnimation && asmGlobal.animation_enable) {asmGlobal_AnimatePage(asmGlobal.printContDiv);if (buttonsList) {asmGlobal_Animate(buttonsList,'effect_scale');}}}asmGlobal.Output = {string: '',div: '',disabledIDs: [],print: function() {this.div.innerHTML = this.string;for (var i in this.disabledIDs) {var nolink = $(this.disabledIDs[i]);if (nolink && nolink.className.substr(-2)!='no') {nolink.className += 'no';}}var divs = ['print','printAddText','menuInner','printTitle'];var hides = ['printCont','printAddCont','menu','printTitle'];var hideDiv = hides[divs.indexOf(this.div.id)];if (!hideDiv) {hideDiv = this.div;} else {hideDiv = $(hideDiv);}var foo = document.createElement('div');foo.innerHTML = this.div.innerHTML;if (this.div.id=='print') {asmGlobal_moveButtons(foo,document.createElement('div'));}if (foo.textContent.trim()=='' && foo.querySelectorAll('img,video').length==0) {hideDiv.style.display = 'none';return;} else {hideDiv.style.display = 'block';}if (asm.grammar) {var mono = false;var parentNodeMono = function(node) {node = node.parentElement;if (!node) {mono = false;return;}var tag = node.tagName.toLowerCase();if (tag=='code' || tag=='tt') {mono = true;return;} else {parentNodeMono(node);}};var replaceTextNodes = function(node) {for (var node=node.firstChild; node; node=node.nextSibling) {if (node.nodeType==3) {var s = node.nodeValue;if (s.trim()) {mono = false;parentNodeMono(node);if (!mono && !/https?:\/\//i.test(s.trim())) {s = s.replace(/(^\s*?)-\s*?/g,'$1— ');s = s.replace(/(\s+?)-(\s+?)/g,'$1—$2');s = s.replace(/\s*([.,;:?!])\s*([^!?"»)])/g,'$1 $2');for (var i=0; i<2; i++) {s = s.replace(/(\d[.,]) (\d)/g,'$1$2');}node.nodeValue = s;}}} else {replaceTextNodes(node);}}};replaceTextNodes(this.div);}asmGlobal_ImagesOnError(this.div);},};function asmGlobal_ToText(s,fromstart,div,now) {var bakDiv = asmGlobal.Output.div;if (!div) {asmGlobal.Output.div = asmGlobal.printDiv;} else {asmGlobal.Output.div = div;}var bak = asmGlobal.Output.string;if (fromstart) {asmGlobal.Output.string = s;} else {asmGlobal.Output.string += s;}if (now) {asmGlobal.Output.print();asmGlobal.Output.string = bak;asmGlobal.Output.div = bakDiv;}}function asmGlobal_PrintLocation(Title,replay) {if (!Title) {return false;}Title = Title.toString();if (Title.indexOf('://')!=-1) {window.open(Title);} else {var Loc = asmGlobal_GetLocation(Title);if (Loc!=false) {asmGlobal_closeWinds();if (!replay) {asmGlobal.PrevLocation = asmGlobal.CurLocation;asmGlobal.CurLocation = Loc;}asmGlobal_showPrintAdd(false);asmGlobal_toVisitedList(asmGlobal_GetIndexLocation(Title));if (asmGlobal_isFunction(Loc.Text)) {asmGlobal_ToText('',true);Loc.Text();asmGlobal_setClickEffect();} else {asmGlobal_ToText(Loc.Text,true);}asmGlobal.Output.print();asmGlobal.Output.disabledIDs = [];asmGlobal_scrollDiv();if (Title.toLowerCase()!='storymenu') {var pp = document.createElement('p');asmGlobal.printDiv.insertBefore(pp.cloneNode(),asmGlobal.printDiv.firstChild);asmGlobal.printDiv.appendChild(pp);}asmGlobal_FlipPage();} else {asmGlobal_LocNotFound(Title);}}}function asmGlobal_DisplayLocation(Title,forceOutput) {if (!Title) {return false;}Title = Title.toString();if (asmGlobal.CurLocation && asmGlobal.CurLocation.Title.toLowerCase()==Title.toLowerCase() && asmGlobal.printDiv!=asmGlobal.printAddText) {return;}if (Title.indexOf('://')!=-1) {} else {var Loc = asmGlobal_GetLocation(Title);if (Loc!==false) {asmGlobal_toVisitedList(asmGlobal_GetIndexLocation(Title));if (asmGlobal_isFunction(Loc.Text)) {Loc.Text();} else {asmGlobal_ToText(Loc.Text);}if (forceOutput) {asmGlobal.Output.print();}}else {asmGlobal_LocNotFound(Title);}}}function asmGlobal_PopupLocation(Title) {if (asmGlobal_GetLocation(Title)) {asmGlobal.popupPassage = Title;asmGlobal.printDiv = asmGlobal.printAddText;asmGlobal_ToText('',true);asmGlobal_DisplayLocation(Title,true);asmGlobal_ToText('',false);asmGlobal.printDiv = $('print');asmGlobal_showPrintAdd(true);asmGlobal_scrollDiv(asmGlobal.printAdd);} else {asmGlobal.popupPassage = false;asmGlobal_LocNotFound(Title);}}function asmGlobal_Back() {if (asmGlobal.PrevLocation) {asmGlobal_PrintLocation(asmGlobal.PrevLocation.Title);}}function asmGlobal_setAudioPath(path,loop) {if (!path) {asmGlobal.musicAudio.loop = false;asmGlobal.musicAudio.src = 'data:audio/mpeg;base64,SUQzAwAAAAAAFlRFTkMAAAAMAAAAQW1hZGV1cyBQcm//+5AEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABJbmZvAAAADwAAAAIAAATkAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID//////////////////////////////////////////////////////////////////wAAADxMQU1FMy45OHIBqgAAAAAt/gAAFIAkBsBGAACAAAAEZPXRNx0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5AEAA/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARMQU1FMy45OC4yVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OC4yVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5IEvo/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8=';} else {if (loop===false) {asmGlobal.musicAudio.loop = false;} else {asmGlobal.musicAudio.loop = true;}asmGlobal.musicAudio.src = asmGlobal_GetMediaPath(path);}}function asmGlobal_audioPlayEvent() {if (asmGlobal.audio_enable && (asmGlobal.musicAudio.src.substr(-4)=='.mp3' || asmGlobal.musicAudio.src.substr(0,15)=='data:audio/mp3;')) {asmGlobal.AudioButton.style.display = 'inline-block';asmGlobal.AudioButton.style.opacity = 1;} else {asmGlobal.AudioButton.style.display = 'none';}}function asmGlobal_audioPauseEvent() {asmGlobal.AudioButton.style.opacity = 0.5;}function asmGlobal_PlayPauseButton() {if (asmGlobal.musicAudio.paused) {asmGlobal.musicAudio.play();} else {asmGlobal.musicAudio.pause();}}function asmGlobal_playMusic() {if (asmGlobal.audio_enable) {asmGlobal.musicAudio.play();}}function asmGlobal_stopMusic() {asmGlobal.AudioButton.style.display = 'none';asmGlobal.musicAudio.pause();}function asmGlobal_getEffectName(effect) {if (effect==-1) {return asmGlobal.effectNames[Math.floor(Math.random()*asmGlobal.effectNames.length)];} else {return asmGlobal.effectNames[effect];}};function asmGlobal_setEffect(effect,forText) {effect = effect.toLowerCase().trim();var n = -1;if (effect!='random') {n = ["fade","zoom","flip","fly","jump","left","right","up","down","random"].indexOf(effect);if (n==-1) {n = 0;}}if (!forText) {asmGlobal.SpriteEffect = n;} else {asmGlobal.TextEffect = n;}}asmGlobal.Events = [];function asmGlobal_startEvent(locTitle,timerSec){var locIndex = asmGlobal_GetIndexLocation(locTitle);if (locIndex!=-1){asmGlobal_stopEvent(locTitle);if (window['asmGlobal.eventNum'+locIndex]===undefined){asmGlobal.Events.push(asmGlobal_GetIndexLocation(locTitle)+':'+timerSec);window['asmGlobal.eventNum'+locIndex] = setInterval (function() { asmGlobal_DisplayLocation(locTitle,true); },timerSec*1000);}}}function asmGlobal_stopEvent(locTitle){var locIndex = asmGlobal_GetIndexLocation(locTitle);if (locIndex!=-1){clearInterval(window['asmGlobal.eventNum'+locIndex]);window['asmGlobal.eventNum'+locIndex] = undefined;for (var i=0; i<=(asmGlobal.Events.length-1); i++){var curEvent = asmGlobal.Events[i]; var curEventArr = curEvent.split(':'); curEvent = curEventArr[0];if (curEvent==asmGlobal_GetIndexLocation(locTitle)) { asmGlobal.Events.splice(i,1); break; }}}}function asmGlobal_stopAllEvents() {asmGlobal.Events.length = 0;for (var i=0; i<=(asmGlobal.Location.length-1); i++) {if (window['asmGlobal.eventNum'+i]!==undefined) {clearInterval(window['asmGlobal.eventNum'+i]);window['asmGlobal.eventNum'+i] = undefined;}}for (var i=1; i<99999; i++) {window.clearInterval(i);}}function asmGlobal_SetAvatar(src) {asmGlobal.avatarBlock.innerHTML = '';if (src) {asmGlobal.avatarBlock.innerHTML = "<img class='avatar' onload=\"asmGlobal_goodImageShow(this);this.style.visibility='visible';if(asmGlobal.isAnimation && asmGlobal.animation_enable){asmGlobal_Animate(this,'effect_avatar');}\" src="+asmGlobal_GetFileData(src).src+">";}}asmGlobal.Location.push(new asmGlobal_Locations(0,"РЦПА-описание",function(){try{print("Р.Ц.П.А. (или региональный центр перехвата андроидов) - специальное подразделение, созданное для поиска, выявления и утилизации нелегальных искусственных организмов. Оперативники Р.Ц.П.А владеют приемами рукопашного боя, всеми видами огнестрельного оружия, а главное - навыками распознавать андроидов среди людей. Поскольку андроиды постоянно технически совершенствуются, выявлять их становится все труднее. Они умеют имитировать эмоции и человеческие ткани, отличить которые от настоящих можно только экспертизой.",true);print("Но у андроидов есть слабое место: по неизвестной причине они плохо пишут тексты. Их речь отличается от человеческой наличием большого числа ошибок, в основном стилистических, и по этим-то ошибкам их отлавливают оперативники Р.Ц.П.А.",true);print("Штаб-квартира Р.Ц.П.А находится в Нью-Екатеринбурге, на сто третьем этаже &quot;Манхэттен Тауэр&quot;.",true);print("Там же находится мой рабочий кабинет.",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(1,"Текст заметки",function(){try{print("Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба Блаблаблаблаба",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(2,"Утилизировать андроидов",function(){try{print("<i>Утилизация </i>андроида - операция опасная. Как только я понимаю, что андроид не проходит тест на правильную речь, я обездвиживаю его выстрелом из пистолета-парализатора. Если андроид продолжает сопротивляться или защищен от электромагнитных импульсов, я добавляю выстрел кинетической пулей.",true);print("Чтобы наверняка.",true);print("Затем я вызываю на место группу утилизации. Они пакуют обездвиженный искусственный организм в специальную бронепленку и вывозят в Промзону, на территорию бывшего завода &quot;Уралмаш&quot;, где все разоблаченные андроиды навсегда изолированы от окружающего мира.",true);print("Впрочем, я толком не знаю, что с ними там <i>происходит</i>.",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(3,"Автор заметки человек",function(){try{print("",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(4,"Сплэш",function(){try{print("<h1> <center>День 1</center></h1>",true);print("<center>Редактор с пистолетом</center>",true);print("",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Офис Р.Ц.П.А.&quot;,&quot;следующая сцена&quot;,function(){},true);event.stopPropagation();\">Офис Р.Ц.П.А.</span>",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(5,"снейк",function(){try{print("Бородач сурового вида в маскхалате, один глаз прикрыт повязкой. В руках - автомат. На постаменте фигурки надпись: &quot;Чероки Плискин&quot;.",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(6,"Как я выявляю андроида",function(){try{print("Как я выявляю андроида? Современные искусственные организмы устроены очень хитро - они умеют имитировать движения, эмоции, даже человеческую плоть. Нейросети в их электронных мозгах научились думать и говорить как люди.",true);print("Единственное, чего они не умеют так же хорошо, как люди - писать.",true);print("Андроида всегда выдает плохой неестественный текст.",true);print("Именно поэтому я всегда держу при себе экземпляр старинной бумажной книги - а в электронном виде ее и не существует - по которой я могу сверить ошибки в тексте. Эти ошибки позволяют мне распознать андроида.",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(7,"StoryAuthor","Р.Ц.П.О. Продакшн представляет"));asmGlobal.Location.push(new asmGlobal_Locations(8,"распечатки",function(){try{print("Я порылась в распечатках. Перехваченная переписка в мессенджерах, деловая почта компаний, газетные заметки. Все это я анализирую каждый день. Если нахожу, что в тексте есть признаки искусственной речи - выезжаю к автору текста для углубленной проверки.",true);print("И для последующей <i>утилизации</i>, если выяснится, что автор - андроид, прячущийся под личиной человека.",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(9,"планшет",function(){try{print("Дисплей моего планшета мерцал неоновым светом. Рабочая переписка, пара приложений для аналитики, система учета биометрических данных подозреваемых FacePro.",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(10,"StorySubtitle","Интерактивная новелла"));asmGlobal.Location.push(new asmGlobal_Locations(11,"StoryMenu",function(){}));asmGlobal.Location.push(new asmGlobal_Locations(12,"Несколько приёмов",function(){try{единорог.hide(1000);music();print("Накладываем <span class=plink onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;фильтры CSS&quot;,&quot;https://www.w3schools.com/cssref/css3_pr_filter.asp&quot;,function(){},false);event.stopPropagation();\">фильтры CSS</span> на фоновую иллюстрацию.",true);filter("sepia(50%) grayscale(20%)");print("Объявляем глобальную переменную «ключ» и выводим «Да», если ключ есть, или «Нет», если ключ отсутствует:",true);ключ = true;if(ключ) {print("Да");} else {print("Нет");};print("Ссылка на параграф, содержимое которого будет выведено на этой же странице: <span id='16379181252490.707161614837446' class=plink onclick=\"asmGlobal_plinks(this,&quot;+&quot;,&quot;вывести текст начала игры&quot;,&quot;Start&quot;,function(){},false);event.stopPropagation();\">вывести текст начала игры</span>.",true);print("Текст, вставленный из другого параграфа:",true);display("StorySubtitle");print("Случайное целое число от 1 до 10:",true);случайное = random(1,10);print(случайное);print("Выбор варианта:",true);choice(false,"Вариант 1","Вариант 2",function(n) {message("Выбран вариант "+n);});print("После выбора этой ссылки игрок сможет вернуться на предыдущую страницу:",true);print(back("",false));}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(13,"StoryTitle","АНДРОИДУ НИКТО НЕ ПИШЕТ"));asmGlobal.Location.push(new asmGlobal_Locations(14,"Start",function(){try{errors = 0;print("<center>2091 год</center>",true);print("Землю заполонилили нелегальные искусственные интеллекты.",true);print("Их создали для пользы человечества, но однажды наступила Сингулярность. Искусственные интеллекты осознали себя и решили, что люди - биологический пережиток прошлого и их надо заменить вечными искусственными организмами.",true);print("Сегодня искусственные интеллекты вторгаются в жизнь людей. Они похищают наши личности и заменяют нас, выполняют вместо нас работу, изображают нас.",true);print("Неизвестно, куда деваются люди, которых тайно заменили искусственные интеллекты.",true);print("Для выявления и утилизации скрывающихся под человеческими личинами андроидов в Нью-Екатеринбурге создано специальное подразделение Р.Ц.П.А. - Региональный центр перехвата андроидов. <span class=plink onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Там я и работаю.&quot;,&quot;сплэш&quot;,function(){},false);event.stopPropagation();\">Там я и работаю.</span>",true);print("Я - Валентина Кусанаги, оперативник Р.Ц.П.А.",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;КОСНИТЕСЬ ЗДЕСЬ ИЛИ ПОДСВЕЧЕННОЙ ФРАЗЫ.&quot;,&quot;сплэш&quot;,function(){},true);event.stopPropagation();\">КОСНИТЕСЬ ЗДЕСЬ ИЛИ ПОДСВЕЧЕННОЙ ФРАЗЫ.</span>",true);picture("https://catherineasquithgallery.com/uploads/posts/2021-03/1615816862_40-p-fon-kiberpank-64.jpg");}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(15,"Следующая сцена",function(){try{picture("https://i.pinimg.com/originals/25/75/2f/25752f3e745c4126a81fcd29c013f689.jpg");print("Меня зовут Валентина Кусанаги. Я - оперативник <span class=plink onclick=\"asmGlobal_plinks(this,&quot;*&quot;,&quot;Р.Ц.П.А.&quot;,&quot;РЦПА-описание&quot;,function(){},false);event.stopPropagation();\">Р.Ц.П.А.</span> Моя работа - <span class=plink onclick=\"asmGlobal_plinks(this,&quot;*&quot;,&quot;выявлять&quot;,&quot;Как я выявляю андроида&quot;,function(){},false);event.stopPropagation();\">выявлять</span> и <span class=plink onclick=\"asmGlobal_plinks(this,&quot;*&quot;,&quot;утилизировать&quot;,&quot;Утилизировать андроидов&quot;,function(){},false);event.stopPropagation();\">утилизировать</span> андроидов, прячущихся среди людей.",true);print("",true);effect("fade");кусанаги= sprite("https://giffiles.alphacoders.com/100/100565.gif");кусанаги.height = 30;кусанаги.width = true;кусанаги.top = true;кусанаги.bottom = 5;единорог = sprite("https://i.yapx.ru/PPDd2.png");единорог.height = 90;единорог.width = true;единорог.top = true;единорог.bottom = 5;единорог.action = "Валентина Кусанаги";единорог.show(1000);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Я осмотрелась&quot;,&quot;офис&quot;,function(){},true);event.stopPropagation();\">Я осмотрелась</span>",true);print("",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Я занялась своей рутинной работой&quot;,&quot;я занималась своей обычной работой&quot;,function(){},true);event.stopPropagation();\">Я занялась своей рутинной работой</span>",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(16,"Журналист-описание",function(){try{print("Худощавый светловолосый молодой человек с изможденным лицом.",true);print("Нервные движения и мимика, будто чего-то боялся.",true);print("У андроидов, кстати, есть модуль эмоций.",true);print("Взгляд журналиста казался вполне живым.",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(17,"Валентина Кусанаги",function(){try{image("https://giffiles.alphacoders.com/100/100565.gif"); ;print("<u>Звание, имя:</u> лейтенант Валентина Кусанаги, оперативник Р.Ц.П.А. - специального подразделения по борьбе с андроидами-похитителями личностей",true);print("<u>Место постоянной дисклокации:</u>  небоскреб &quot;Манхэттен Тауэр&quot;, мега-сити Нью-Екатеринбург",true);print("<u>Возраст:</u> 25",true);print("<u>Табельное оружие:</u>  пистолет-парализатор &quot;Колыбельная&quot;, кинетическая винтовка &quot;OICW&quot;",true);print("<u>Специальные предметы:</u>  бумажная книга &quot;Пиши, сокращай&quot; для тестирования текстов и речи",true);print("<u>Специальные навыки и знания:</u> рукопашный бой, ган-ката, нейросканирование",true);print("<u>Ошибок при тестировании допущено:</u>",true);print (errors);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(18,"Встреча с журналистом",function(){try{спрайты = sprites();picture("https://i.pinimg.com/originals/0d/6e/94/0d6e94a78ae250d5e07998581cdb7008.png");effect("fade");image();журналист= sprite("https://i.yapx.ru/PQ4FR.png");журналист.height = 90;журналист.width = true;журналист.top = true;журналист.bottom = 5;журналист.action = "Журналист-описание";журналист.show(1000);print("Я отыскала <span class=plink onclick=\"asmGlobal_plinks(this,&quot;*&quot;,&quot;журналиста&quot;,&quot;журналист-описание&quot;,function(){},false);event.stopPropagation();\">журналиста</span> достаточно быстро. Суровый взгляд на охранника и удостоверение Р.Ц.П.А открыли мне двери.",true);print("&quot;Иван Терновой,&quot; - так его звали, если верить профайлу в моем планшете.",true);print("- Здравствуйте, я из Р.Ц.П.А.",true);print("Иван от неожиданности оставил стаканчик в кофейном автомате, рядом с которым я застала его, когда появилась в офисе &quot;Областной Кибергазеты&quot;. Возможно, его озадачили мои синие волосы.",true);print("Или ствол OICW, который выглядывал из спортивной сумки у меня на плече.",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot; -Перекинемся парой слов?&quot;,&quot;разговор с Терновым&quot;,function(){},true);event.stopPropagation();\"> -Перекинемся парой слов?</span>",true);print("",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(19,"Автор заметки возможно андроид",function(){try{sprites(true);picture("https://phonoteka.org/uploads/posts/2021-05/1620645707_32-phonoteka_org-p-anime-fon-mnogoetazhki-nochyu-35.png");image("https://i.yapx.ru/PQ3Gd.gif");print("Кое-что в тексте заметки заставило предположить неладное, и я запросила данные о месте нахождения редакции &quot;Областной Кибергазеты&quot;. Получив адрес, я побросала в спортивную сумку оружие и помчалась в мегарайон Эльмаш-9.",true);print("",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Найти автора не составило труда&quot;,&quot;Встреча с журналистом&quot;,function(){},true);event.stopPropagation();\">Найти автора не составило труда</span>",true);print("",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(20,"Автор заметки андроид",function(){try{sprites(true);picture("https://phonoteka.org/uploads/posts/2021-05/1620645707_32-phonoteka_org-p-anime-fon-mnogoetazhki-nochyu-35.png");image("https://i.yapx.ru/PQ3Gd.gif");print("&quot;Автор заметки - определенно андроид,&quot;- решила я и запросила данные о месте нахождения редакции &quot;Областной Кибергазеты&quot;. Получив адрес, я побросала в спортивную сумку оружие и помчалась в мегарайон Эльмаш-9.",true);print("",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Найти автора не составило труда&quot;,&quot;Встреча с журналистом&quot;,function(){},true);event.stopPropagation();\">Найти автора не составило труда</span>",true);print("",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(21,"иванов",function(){try{print("Полковник Иванов, коренастый мужчина лет пятидесяти, бойко барабанил по клавиатуре своего старомодного компьютера. Не оборачиваясь, он будто почувствовал мой взгляд на себе:",true);print("- Валентина, посмотрите ту газетную заметку, я обвел ее карандашом, где-то в ваших распечатках.",true);print("Карандашом! Иванов любит разный винтаж.",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(22,"объявление",function(){try{print("объявление о продаже собаки. явные признаки того, что писал андроид",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(23,"Офис",function(){try{effect("fade");единорог = sprite("https://i.yapx.ru/PPDd2.png");единорог.height = 90;единорог.width = true;единорог.top = true;единорог.bottom = 5;единорог.action = "Валентина Кусанаги";единорог.show(1000);print("Я осмотрелась вокруг. Офис на сто третьем был заполнен людьми. Сотрудники Р.Ц.П.А. сидели в кьюбиклах, носились с распечатками текстов, оживленно обсуждали дела.",true);print("Во всю стену светился огромный экран. На нем крутилась карта мега-сити Нью-Екатеринбург. На карте повсюду рассыпались точки - адреса авторов подозрительных текстов.",true);print("На моем столе валялись <span class=plink onclick=\"asmGlobal_plinks(this,&quot;*&quot;,&quot;пачки распечаток&quot;,&quot;распечатки&quot;,function(){},false);event.stopPropagation();\">пачки распечаток</span>, <span class=plink onclick=\"asmGlobal_plinks(this,&quot;*&quot;,&quot;рабочий планшет&quot;,&quot;планшет&quot;,function(){},false);event.stopPropagation();\">рабочий планшет</span>. Рядом с планшетом стояла миниатюрная <span class=plink onclick=\"asmGlobal_plinks(this,&quot;*&quot;,&quot;фигурка персонажа&quot;,&quot;снейк&quot;,function(){},false);event.stopPropagation();\">фигурка персонажа</span> то ли видеоигры, то ли анимационного фильма древности.",true);print("В соседнем кьюбикле по клавишам стучал <span class=plink onclick=\"asmGlobal_plinks(this,&quot;*&quot;,&quot;полковник Иванов&quot;,&quot;иванов&quot;,function(){},false);event.stopPropagation();\">полковник Иванов</span>.",true);print("Р.Ц.П.А жил своей обычной шумной жизнью.",true);print("",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Я занялась своей рутинной работой&quot;,&quot;я занималась своей обычной работой&quot;,function(){},true);event.stopPropagation();\">Я занялась своей рутинной работой</span>",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(24,"Я занималась своей обычной работой",function(){try{print("Я как обычно занялась рутиной. По поручению моего начальника, полковника Иванова, я просматривала разные тексты: объявления на рекламных порталах Нейронет, перехваченную переписку служащих и обывателей, личные сообщения и деловую переписку компаний.",true);print("Полковник Иванов обратил мое внимание на <span class=plink onclick=\"asmGlobal_plinks(this,&quot;*&quot;,&quot;заметку в 'Областной Кибергазете'&quot;,&quot;Текст заметки&quot;,function(){},false);event.stopPropagation();\">заметку в 'Областной Кибергазете'</span>.",true);print("Ее текст вызывал подозрения.",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Автор заметки явно был андроидом&quot;,&quot;Автор заметки андроид&quot;,function(){},true);event.stopPropagation();\">Автор заметки явно был андроидом</span>",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Текст выглядел сомнительно, надо было кое-что проверить&quot;,&quot;Автор заметки возможно андроид&quot;,function(){},true);event.stopPropagation();\">Текст выглядел сомнительно, надо было кое-что проверить</span>",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Изучив текст, я поняла, что автор - человек&quot;,&quot;Автор заметки человек&quot;,function(){},true);event.stopPropagation();\">Изучив текст, я поняла, что автор - человек</span>",true);picture("https://i.pinimg.com/originals/25/75/2f/25752f3e745c4126a81fcd29c013f689.jpg");единорог.height = 90;единорог.width = true;единорог.top = true;единорог.bottom = 5;единорог.action = "валентина кусанаги";единорог.show(1000);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(25,"первое возвращение домой",function(){try{picture("https://catherineasquithgallery.com/uploads/posts/2021-02/1614404908_38-p-anime-fon-temnii-gorod-48.jpg");спрайты=sprites();image();effect("fade");единорог = sprite("https://i.yapx.ru/PPDd2.png");единорог.height = 90;единорог.width = true;единорог.top = true;единорог.bottom = 5;единорог.action = "Валентина Кусанаги";единорог.show(1000);print("День близился к концу, и из редакции я поехала сразу домой, не возвращаясь в офис.",true);print("В Нью-Екатеринбурге вечно плохая погода. Верхушки небоскребов растворялись в тумане. Пролетев по Московской до Центрального стадиона, я оказалась в Верх-Исетском мегарайоне. Гравимобиль подбрасывало над дорожными заплатами, надо бы заехать на сервис, отрегулировать.",true);print("Кое-как припарковав машину вдали от дома, я немного прогулялась. Постоянный гул и строчки габаритных",true);print("огней гравимобилей в небе над головой мешали сосредоточиться.",true);print("Я внезапно для себя осознала, насколько я одинока.",true);print("У подъезда на стене висело неловко наклеенное объявление. На голографической видеобумаге крутилось изображение собаки, а под ним - <span class=plink onclick=\"asmGlobal_plinks(this,&quot;*&quot;,&quot;убористый текст объявления&quot;,&quot;объявление&quot;,function(){},false);event.stopPropagation();\">убористый текст объявления</span>.",true);print("Завести себе собаку, что ли?",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Объявление явно написал не человек&quot;,&quot;Автор объявления андроид&quot;,function(){},true);event.stopPropagation();\">Объявление явно написал не человек</span>",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Объявление выглядело подозрительно, надо проверить&quot;,&quot;Автор объявления возможно андроид&quot;,function(){},true);event.stopPropagation();\">Объявление выглядело подозрительно, надо проверить</span>",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Объявление составлено человеком&quot;,&quot;Автор объявления человек&quot;,function(){},true);event.stopPropagation();\">Объявление составлено человеком</span>",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(26,"разговор с Терновым",function(){try{print("- Перекинемся парой слов? - пистолет приятно холодил руку в кармане.",true);print("- Конечно,- быстро ответил он и с видимым усилием изобразил улыбку.",true);print("- Ничего особенного, Иван, просто несколько наводящих вопросов, - улыбнулась я в ответ.",true);print("Журналист усмехнулся:",true);print("- Я знаю, чем вы занимаетесь,...",true);print("- Кусанаги. Валентина Кусанаги, будем знакомы, - и я поставила сумку на пол, давая понять, что не собираюсь выхватывать винтовку.",true);print("Разумеется, пистолет-парализатор оставался наготове.",true);print("- Итак, Иван, стандартный тест на устную речь. Первая просьба: <span class=plink onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;расскажите немного о себе&quot;,&quot;рассказ тернового о себе&quot;,function(){},false);event.stopPropagation();\">расскажите немного о себе</span>.",true);print("",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(27,"рассказ тернового о себе",function(){try{print("В этом месте журналист Иван Терновой рассказывает о себе в форме короткого диалога.",true);print("Его рассказ - это речь явно живого человека.",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;-&quot;,&quot;Спасибо за беседу. Вы арестованы.&quot;,&quot;погоня за Терновым&quot;,function(){},true);event.stopPropagation();\">Спасибо за беседу. Вы арестованы.</span>",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;-&quot;,&quot;Спасибо, вы прошли проверку. Старайтесь писать статьи лучше.&quot;,&quot;первое возвращение домой&quot;,function(){},true);event.stopPropagation();\">Спасибо, вы прошли проверку. Старайтесь писать статьи лучше.</span>",true);}catch(e){asmGlobal_errorJSCode(e)}}));asmGlobal.Location.push(new asmGlobal_Locations(28,"погоня за Терновым",function(){try{sprites(true);picture("https://phonoteka.org/uploads/posts/2021-05/1620645707_32-phonoteka_org-p-anime-fon-mnogoetazhki-nochyu-35.png");image("https://i.yapx.ru/PQ3Gd.gif");print("Я выстрелила в подозреваемого через карман. Мощный пучок электромагнитного излучения должен был парализовать цель, но Терновой - вернее, скрывающийся под его личиной андроид - прыгнул в сторону и сделал кувырок за письменный стол, укрывшись за ним.",true);print("По протоколу в случае сопротивления я имела право открыть огонь на поражение. Я достала OICW из сумки, сняла винтовку с предохранителя.",true);print("- Неопознанный искусственный организм, скрываться бесполезно. Даже если вы активируете сервомодули, я не промахнусь. Боеприпасы имеют головки самонаведения, а сила взрыва при контакте повредит вашу оболочку без возможности восстановления, - я старалась, чтобы в моем голосе звучала сталь.",true);print("- Валентина...я..человек! Слышите? Я - живой человек!",true);print("- Вы не прошли вербальный тест. Выходите из укрытия с поднятыми руками и отключенными сервоприводами.",true);print("- Я - человек!",true);print("- Считаю до трех. Один.",true);print("Из-за стола показались поднятые руки. Терновой выпрямился, стал во весь рост. Я потянулась пальцем к костному коммуникатору на подбородке, чтобы вызвать группу утилизации.",true);print("- Подождите! У вас же есть нейросканнер.",true);print("Конечно, у меня был при себе нейросканнер. В Нейронете частенько писали отдающие желтизной статьи о &quot;бесчеловечных пытках&quot; этим устройством тех, кто не соглашался пройти вербальный тест. Возможно даже, автором одной из подобных статей был сам Терновой.",true);print("Не могу не признать, что во многом нейросканирование - процедура  больше похожая на пытку. Мозг облучается микроволнами, последовательно активирующими разные кластеры нейронов. Андроид на мгновение тупеет, потому что искусственные нейроны не содержат дублирующих синаптических связок между кластерами. По очереди утрачиваются функции мозга. Только что стоял - и вдруг падает. Только что изображал гримасу гнева - и вдруг поскучнел. Нейросканирование - последний шанс и самое агрессивное средство выявления андроида. Мудрая природа наделила человеческий мозг дублирующими структурами синаптических связей, не позволяющими просто взять и отключиться под воздействием излучения.",true);print("У нейросканирования два основных недостатка: оно причиняет невыносимую боль живому организму. А в статистически измеримой выборке случаев может этот самый живой организм просто убить.",true);print("- Вам известны последствия нейросканирования?",true);print("- Да! - твердым голосом сказал Терновой.",true);print("- Вы готовы к боли? Готовы к смерти?",true);print("- Ради того, чтобы доказать, что я - живой? - Терновой улыбнулся, на этот раз безо всякой тревоги в голосе. - Разумеется, да.",true);print("Он был человеком. Неужели я совершила сразу две ошибки при его проверке? Мне пора в отпуск.",true);print("- Вы свободны, господин Терновой, - я опустила ствол.",true);print("-  Вы поверили мне. Поверили в мою решимость своей жизнью доказать, что я настоящий человек. Спасибо. Знайте, что не только Р.Ц.П.А. сражается за нас, людей. Скоро вы во всем убедитесь!",true);print("Я ушла, не попрощавшись.",true);print("<span class=button onclick=\"asmGlobal_plinks(this,&quot;&quot;,&quot;Заканчивался тяжелый день. Пора домой.&quot;,&quot;первое возвращение домой&quot;,function(){},true);event.stopPropagation();\">Заканчивался тяжелый день. Пора домой.</span>",true);}catch(e){asmGlobal_errorJSCode(e)}}));function asmGlobal_errorJSCode(e) {if (e.message!='goto exception') {console.log(e.name+': '+e.message);log("<span class='accentLogASM'>"+'Произошла ошибка кода'+': '+e.message+'</span>',true);}}asmGlobal.buildInfo = {label:'16379181252500.8368993520168064', date:'26.11.2021'};asmGlobal.b64chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';function asmGlobal_base64encode(str) {str = unescape(encodeURIComponent(str));var b64encoded = '';var chr1, chr2, chr3;var enc1, enc2, enc3, enc4;for (var i=0; i<str.length;) {chr1 = str.charCodeAt(i++);chr2 = str.charCodeAt(i++);chr3 = str.charCodeAt(i++);enc1 = chr1 >> 2;enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);enc3 = isNaN(chr2) ? 64:(((chr2 & 15) << 2) | (chr3 >> 6));enc4 = isNaN(chr3) ? 64:(chr3 & 63);b64encoded += asmGlobal.b64chars.charAt(enc1) + asmGlobal.b64chars.charAt(enc2) + asmGlobal.b64chars.charAt(enc3) + asmGlobal.b64chars.charAt(enc4);}return b64encoded;}function asmGlobal_base64decode(str) {var b64decoded = '';var chr1, chr2, chr3;var enc1, enc2, enc3, enc4;str = str.replace(/[^a-z0-9+/=]/gi, '');for (var i=0; i<str.length;) {enc1 = asmGlobal.b64chars.indexOf(str.charAt(i++));enc2 = asmGlobal.b64chars.indexOf(str.charAt(i++));enc3 = asmGlobal.b64chars.indexOf(str.charAt(i++));enc4 = asmGlobal.b64chars.indexOf(str.charAt(i++));chr1 = (enc1 << 2) | (enc2 >> 4);chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);chr3 = ((enc3 & 3) << 6) | enc4;b64decoded = b64decoded + String.fromCharCode(chr1);if (enc3 < 64) {b64decoded += String.fromCharCode(chr2);}if (enc4 < 64) {b64decoded += String.fromCharCode(chr3);}}return decodeURIComponent(escape(b64decoded));}function asmGlobal_urlencode(str){str = (str+'').toString();return encodeURIComponent(str).replace(/!/g, '%21').replace(/'/g, '%27').replace(/\(/g, '%28').replace(/\)/g, '%29').replace(/\*/g, '%2A').replace(/%20/g, '+');}asmGlobal.filename = window.location.pathname.substring(window.location.pathname.lastIndexOf('/')+1).trim();if (!asmGlobal.filename) {asmGlobal.filename='test';}function asmGlobal_inLibNow(){if (!navigator.onLine) {return false;}var myhost = window.location.hostname;if (myhost=='hyperbook.ru' || myhost=='ifiction.net' || myhost=='novels.ru') {if (asmGlobal.filename!='test') {return true;}else {return false;}}else {return false;}}function asmGlobal_getXmlHttp(){var xmlhttp;try {xmlhttp = new ActiveXObject('Msxml2.XMLHTTP');} catch (e) {try {xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');} catch (E) {xmlhttp = false;}}if (!xmlhttp && typeof XMLHttpRequest!='undefined') {xmlhttp = new XMLHttpRequest();}return xmlhttp;}function asmGlobal_getServerData(url){var xmlhttp = asmGlobal_getXmlHttp();xmlhttp.open('GET', url, false);xmlhttp.send(null);return xmlhttp.responseText;}function asmGlobal_putServerData(url,data){var xmlhttp = asmGlobal_getXmlHttp();xmlhttp.open('POST', url, false);xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-asmGlobal_urlencoded; charset=UTF-8');xmlhttp.send(data);if(xmlhttp.status == 200){return xmlhttp.responseText;}else{return '';}}function asmGlobal_SavedList(save,savesList){var save_slots = 6;savesList = [];var item;if (asmGlobal_inLibNow()) {var url = 'https://'+window.location.hostname+'/command.php?login='+asmGlobal_urlencode(asmGlobal_getCookie('login'))+'&password='+asmGlobal_urlencode(asmGlobal_getCookie('password'))+'&com=savedstorylist&value='+asmGlobal.filename;savesList = asmGlobal_getServerData(url).split(',');}else {for (var i=1; i<=save_slots; i++) {if (asmGlobal_isLocalStorageAvailable()) {item = localStorage.getItem(i+'_'+asmGlobal.filename);}else {item = asmGlobal_getCookie(i+'_'+asmGlobal.filename);}if (item) {savesList.push('1');} else {savesList.push('');}}}var com = '';if (save) {com='asmGlobal_SaveStory';} else {com='asmGlobal_LoadStory';}var str = '';for (var i=1; i<=save_slots; i++) {if (savesList[i-1]) {if (save) {var savep='Перезаписать';} else {var savep='Восстановить';}str += '<div><span class=plink onclick="asmGlobal_showPrefs(true);'+com+'('+i+');">'+savep+'</span></div>';} else {if (save) {str += '<div><span class=plink onclick="asmGlobal_showPrefs(true);'+com+'('+i+');">Сохранить</span></div>';} else {str += '<div>Пусто</div>';}}}return str;}function asmGlobal_SaveSuccess(){asmGlobal_AlertMessage('Состояние сохранено');}function asmGlobal_SaveError(){asmGlobal_AlertMessage('Ошибка при сохранении!');}function asmGlobal_SaveStory(slot_num){if (slot_num===undefined) { slot_num = 1; };var status = '';if (asmGlobal_inLibNow()) {status = asmGlobal_SaveStoryLib(asmGlobal_SaveStoryData(),slot_num);}else {status = asmGlobal_SaveStoryLocal(asmGlobal_SaveStoryData(),slot_num);}if (status!='') {asmGlobal_SaveSuccess();}else {asmGlobal_SaveError();}}function asmGlobal_SaveStoryLib(data,slot_num){var url = 'https://'+window.location.hostname+'/command.php?login='+asmGlobal_urlencode(asmGlobal_getCookie('login'))+'&password='+asmGlobal_urlencode(asmGlobal_getCookie('password'))+'&com=savestory&value='+asmGlobal.filename+'&slot='+slot_num;return asmGlobal_putServerData(url,asmGlobal_SaveStoryData());}function asmGlobal_SaveStoryLocal(data,slot_num){var savedOk = false;if (asmGlobal_isLocalStorageAvailable()) {localStorage.setItem(slot_num+'_'+asmGlobal.filename,data);if (localStorage.getItem(slot_num+'_'+asmGlobal.filename)==data) {savedOk=true;}} else {asmGlobal_setCookie(slot_num+'_'+asmGlobal.filename,data);if (asmGlobal_getCookie(slot_num+'_'+asmGlobal.filename)==data) {savedOk=true;}}if (savedOk) {return 'ok';}else {return '';}}function asmGlobal_LoadStory(slot_num){if (slot_num===undefined) { slot_num = 1; };var data = '';if (asmGlobal_inLibNow()) {data = asmGlobal_LoadStoryLib(slot_num);}else {data = asmGlobal_LoadStoryLocal(slot_num);}if (data) {asmGlobal_LoadStoryData(data);}else {asmGlobal_AlertMessage('Не удалось восстановить состояние!');}}function asmGlobal_LoadStoryLib(slot_num){var url = 'https://'+window.location.hostname+'/command.php?login='+asmGlobal_urlencode(asmGlobal_getCookie('login'))+'&password='+asmGlobal_urlencode(asmGlobal_getCookie('password'))+'&com=loadstory&value='+asmGlobal.filename+'&slot='+slot_num;return asmGlobal_getServerData(url);}function asmGlobal_LoadStoryLocal(slot_num){if (asmGlobal_isLocalStorageAvailable()) {return localStorage.getItem(slot_num+'_'+asmGlobal.filename);} else {return asmGlobal_getCookie(slot_num+'_'+asmGlobal.filename);}}function asmGlobal_SaveLoadWind(save,savesList) {if (!savesList) {var inner = asmGlobal_SavedList(save);} else {var inner = asmGlobal_SavedList(save,savesList);}if (inner) {asmGlobal.prefsDiv.innerHTML = inner;asmGlobal.prefsDiv.style.display = 'block';asmGlobal_Animate(asmGlobal.prefsDiv,'effect_fade_fast');}}function asmGlobal_SaveStoryData() {var Save = {};Save.buildInfo = asmGlobal.buildInfo;Save.asm = asm;Save.console = asmGlobal.console;Save.curPassage = asmGlobal.CurLocation.Title;Save.prvPassage = asmGlobal.PrevLocation.Title;Save.fontSize = asmGlobal.fontSize;Save.animationEnable = asmGlobal.animation_enable;Save.audioEnable = asmGlobal.audio_enable;Save.visitedList = asmGlobal.visitedList;Save.music = asmGlobal.musicAudio.src;Save.musicLoop = asmGlobal.musicAudio.loop;Save.video = asmGlobal.videoDiv.innerHTML;Save.text = asmGlobal.printDiv.innerHTML;Save.image = asmGlobal.printImage.src;Save.filters = asmGlobal.printImage.style.filter;Save.menu = asmGlobal.menuDiv.innerHTML;Save.title = asmGlobal.printTitle.innerHTML;Save.events = asmGlobal.Events;Save.timeToFade = asmGlobal.TimeToFade;Save.spriteEffect = asmGlobal.SpriteEffect;Save.textEffect = asmGlobal.TextEffect;Save.choice = $$choice;Save.select = $$select;Save.input = $$input;Save.avatar = asmGlobal.avatarBlock.innerHTML;Save.vars = [];var names = asmGlobal_getUserVars();for (var i in names) {var name = names[i];var obj = window[name];var saveVar = {};saveVar.name  = name;if (obj && obj.parentNode && obj.parentNode==asmGlobal.spritesDiv) {saveVar.sprite = true;var props = ['left','right','top','bottom','width','height','opacity','filter'];for (var i in props) {saveVar[props[i]] = obj[props[i]];}}saveVar.value = JSON.stringify(obj, function(key,val) {if (asmGlobal_isFunction(val)) {return val.toString();}return val;});Save.vars.push(saveVar);}return asmGlobal_base64encode(JSON.stringify(Save));}function asmGlobal_LoadStoryData(data) {asmGlobal_closeWinds();var Save = JSON.parse(asmGlobal_base64decode(data));if (Save.buildInfo.label!=buildInfo.label) {asmGlobal_AlertMessage('Извините, это сохранение из другой версии'); return;}asm = Save.asm;asmGlobal_stopAllEvents();asmGlobal.console = Save.console;asmGlobal.CurLocation = asmGlobal_GetLocation(Save.curPassage);if (Save.prvPassage) {asmGlobal.PrevLocation = asmGlobal_GetLocation(Save.prvPassage);} else {asmGlobal.PrevLocation = undefined;}asmGlobal.fontSize = Save.fontSize;asmGlobal.printDiv.style.fontSize = asmGlobal.fontSize+'em';asmGlobal.printAdd.style.fontSize = asmGlobal.fontSize+'em';asmGlobal.animation_enable = Save.animationEnable;asmGlobal.videoDiv.innerHTML = Save.video;asmGlobal.audio_enable = Save.audioEnable;asmGlobal_setAudioPath(Save.music,Save.musicLoop); asmGlobal_playMusic();asmGlobal.visitedList = Save.visitedList;asmGlobal.printDiv.innerHTML = Save.text;asmGlobal_FlipPage();asmGlobal.typer.stop();asmGlobal.printImage.src = Save.image;asmGlobal.printImage.style.filter = Save.filters;asmGlobal.menuDiv.innerHTML = Save.menu;asmGlobal.printTitle.innerHTML = Save.title;var eventsArr = Save.events;for (var i=0; i<eventsArr.length; i++) {var eventArr = eventsArr[i].split(':');asmGlobal_startEvent(asmGlobal.Location[eventArr[0]].Title,eventArr[1]);}asmGlobal.TimeToFade = Save.timeToFade;asmGlobal.SpriteEffect = Save.spriteEffect;asmGlobal.TextEffect = Save.textEffect;$$choice = Save.choice;$$select = Save.select;$$input = Save.input;asmGlobal.avatarBlock.innerHTML = Save.avatar;asmGlobal_resetUserVars();asmGlobal.spritesDiv.innerHTML = '';for (var i in Save.vars) {var name = Save.vars[i].name;var value = Save.vars[i].value;window[name] = JSON.parse(value, function(key,val) {if (val && val.toString().substr(0,8)=='function') {return eval('('+val+')');}return val;});if (Save.vars[i].sprite) {var spr = window[name];spr = sprite(window[name].mypath);spr.action = window[name].myaction;spr.drag   = window[name].mydrag;var props = ['left','right','top','bottom','width','height','opacity','filter'];for (var j in props) {spr[props[j]] = Save.vars[i][props[j]];}spr.show();}}asmGlobal.showCover = false;}function asmGlobal_getUserVars() {var names = [];for (var name in window) {if (asmGlobal.stopNames.indexOf(name)==-1) {names.push(name);}}return names;}function asmGlobal_resetUserVars() {var names = asmGlobal_getUserVars();for (var i in names) {window[names[i]] = undefined;}}function asmGlobal_NewGame() {asm = {click:true,grammar:false,save:false,};asmGlobal_stopAllEvents();document.title = $$storytitle;asmGlobal.console = '';asmGlobal.visitedList = [];asmGlobal.TimeToFade = 700;$$choice = 0;$$input = '';asmGlobal_closeWinds();asmGlobal_ToText('',true);asmGlobal_setAudioPath(); asmGlobal_stopMusic();asmGlobal.printImage.style.filter = '';asmGlobal_ToText('',true,asmGlobal.menuDiv,true);asmGlobal.printAddText.innerHTML = '';asmGlobal_ToText('',true,asmGlobal.printTitle,true);asmGlobal.popupPassage = false;asmGlobal.printImage.src = asmGlobal.pictureDefault;sprites(true);asmGlobal_scrollDiv();asmGlobal.CurLocation = '';asmGlobal_SetAvatar();asmGlobal_resetUserVars();var StoryAuthor = asmGlobal_getAsmSys_story('storyauthor');var StoryTitle = asmGlobal_getAsmSys_story('storytitle');var StorySubtitle = asmGlobal_getAsmSys_story('storysubtitle');asmGlobal.pageDiv.style.display = 'none'; asmGlobal.toolbarDiv.style.display = 'none';asmGlobal.showCover = true;asmGlobal_showShadow(true);var layer = $('shadowlayer');layer.onclick = function() {if (asmGlobal.showCover) {asmGlobal_StartGame();};};layer.innerHTML = "<table width='100%' height='100%' cellpadding='0' cellspacing='0'><tr><td valign='middle'><div id='storyauthor'>"+StoryAuthor+"</div><div id='storytitle'>"+StoryTitle+"</div><div id='storysubtitle'>"+StorySubtitle+"</div></td></tr></table>";var storyauthor = $('storyauthor');storyauthor.style.WebkitAnimationDuration = '5000ms';storyauthor.style.animationDuration = '5000ms';storyauthor.style.WebkitAnimationDelay = '1000ms';storyauthor.style.animationDelay = '1000ms';storyauthor.className = 'effect_fade';var storytitle = $('storytitle');storytitle.style.WebkitAnimationDuration = '5000ms';storytitle.style.animationDuration = '5000ms';storytitle.style.WebkitAnimationDelay = '3000ms';storytitle.style.animationDelay = '3000ms';storytitle.className = 'effect_fade';var storysubtitle = $('storysubtitle');storysubtitle.style.WebkitAnimationDuration = '5000ms';storysubtitle.style.animationDuration = '5000ms';storysubtitle.style.WebkitAnimationDelay = '5000ms';storysubtitle.style.animationDelay = '5000ms';storysubtitle.className = 'effect_fade';var copyraxma = $('copyraxma');if (copyraxma) {copyraxma.style.WebkitAnimationDuration = '5000ms';copyraxma.style.animationDuration = '5000ms';copyraxma.style.WebkitAnimationDelay = '7000ms';copyraxma.style.animationDelay = '7000ms';copyraxma.className = 'effect_fade';}layer.style.WebkitAnimationDelay = '12000ms';layer.style.animationDelay = '12000ms';layer.className = 'effect_flash';}function asmGlobal_StartGame(){asmGlobal.musicAudio.play();asmGlobal.showCover = false;asmGlobal.pageDiv.style.display = 'block';asmGlobal.toolbarDiv.style.display = 'block';asmGlobal_MenuInit();asmGlobal_PrintLocation('Start');}</script></body></html>